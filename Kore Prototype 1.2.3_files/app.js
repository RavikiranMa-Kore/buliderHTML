!function(){"use strict";angular.module("app",["app.core","app.widgets","app.layout","app.login","app.navigation","app.messages","app.spaces","app.rooms","app.external-bots","app.modals","app.admin"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";function a(){this.config={appErrorPrefix:void 0},this.configure=function(a){this.config.appErrorPrefix=a},this.$get=function(){return{config:this.config}}}function b(a){a.decorator("$exceptionHandler",c)}function c(a,b,c){return function(d,e){var f=b.config.appErrorPrefix||"",g={exception:d,cause:e};d.message=f+d.message,a(d,e),c.error(d.message,g)}}angular.module("blocks.exception").provider("exceptionHandler",a).config(b),b.$inject=["$provide"],c.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function a(a){function b(b){return function(c){a.error(b,c)}}var c={catcher:b};return c}angular.module("blocks.exception").factory("exception",a),a.$inject=["logger"]}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";function a(a,b){function c(c,d,e){b.error(c,e),a.error("Error: "+c,d)}function d(c,d,e){b.info(c,e),a.info("Info: "+c,d)}function e(c,d,e){b.success(c,e),a.info("Success: "+c,d)}function f(c,d,e){b.warning(c,e),a.warn("Warning: "+c,d)}var g={showToasts:!0,error:c,info:d,success:e,warning:f,log:a.log};return g}angular.module("blocks.logger").factory("logger",a),a.$inject=["$log","toastr"]}(),function(){"use strict";angular.module("blocks.router",["ngRoute","blocks.logger"])}(),function(){"use strict";function a(){this.config={},this.$get=function(){return{config:this.config}}}function b(a,b,c,d,e,f){function g(a){a.forEach(function(a){a.config.resolve=angular.extend(a.config.resolve||{},e.config.resolveAlways),n.when(a.url,a.config)}),n.otherwise({redirectTo:"/"})}function h(){var c;b.$on("$routeChangeStart",function(b,d,e){d.loginRequired&&!f.isAuthenticated()?(c=a.path(),a.path("/").replace()):c&&f.isAuthenticated()&&(a.path(c).replace(),c=null)})}function i(){b.$on("$routeChangeError",function(b,c,e,f){if(!k){l.errors++,k=!0;var g=c&&(c.title||c.name||c.loadedTemplateUrl)||"unknown target",h="Error routing to "+g+". "+(f.msg||"");d.warning(h,[c]),a.path("/")}})}function j(){for(var a in c.routes)if(c.routes.hasOwnProperty(a)){var b=c.routes[a],d=!!b.title;d&&m.push(b)}return m}var k=!1,l={errors:0,changes:0},m=[],n=e.config.$routeProvider,o={configureRoutes:g,getRoutes:j,routeCounts:l};return h(),i(),o}angular.module("blocks.router").provider("routehelperConfig",a).factory("routehelper",b),b.$inject=["$location","$rootScope","$route","logger","routehelperConfig","security"]}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngRoute","ngSanitize","blocks.exception","blocks.logger","blocks.router","ngplus","ui.bootstrap","angularMoment","btford.socket-io","luegg.directives","timer","ui.sortable","validation.match","afkl.lazyImage","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.poster","ngPhotoswipe","angular-filters","ngTagsInput"])}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function a(a){a.options.timeOut=4e3,a.options.positionClass="toast-bottom-right"}function b(a,b,c,e,f,g,h){b.debugEnabled&&b.debugEnabled(!0),a.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/),g.locale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"just now",m:"a min",mm:"%d min",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),h.setActiveInterpolation("tagsInput",{placeholder:!0}),e.config.$routeProvider=c,e.config.docTitle="Kore: ";var i={ready:["appData",function(a){return a.ready()}]};e.config.resolveAlways=i,f.configure(d.appErrorPrefix)}var c=angular.module("app.core");c.config(a),a.$inject=["toastr"];var d={appErrorPrefix:"[NG-Modular Error] ",appTitle:"Kore",version:"1.0.0"};c.value("config",d),c.config(b),b.$inject=["$animateProvider","$logProvider","$routeProvider","routehelperConfigProvider","exceptionHandlerProvider","moment","tagsInputConfigProvider"]}(),function(){"use strict";function a(a,b,c){function d(){return i}function e(){return j}function f(){return l}function g(){return k}function h(b){var c,d;switch(c=new Date,b.type){case"min":c.setMinutes(c.getMinutes()+b.val);break;case"hour":c.setHours(c.getHours()+b.val)}return d=c.toISOString(),a.when(d)}var i=["online","away","busy","stealth"],j=["#34d4bf","#00d0ec","#00b1ff","#008cff","#0252ec","#0001ad","#5002ec","#6902ec","#8a00ff","#bc00eb","#f800ff","#ff00a9"],k=[{type:"min",val:15,desc:"15 minutes"},{type:"min",val:30,desc:"30 minutes"},{type:"hour",val:1,desc:"1 hour"},{type:"hour",val:5,desc:"5 hours"},{type:"hour",val:8,desc:"8 hours"},{type:"hour",val:12,desc:"12 hours"},{type:"hour",val:24,desc:"24 hours"},{type:null,val:null,desc:"Until I turn it back on"}],l=[{name:"United States",value:"+1"},{name:"Afghanistan",value:"+93"},{name:"Albania",value:"+355"},{name:"Australia",value:"+61"},{name:"Austria",value:"+43"},{name:"Canada",value:"+1"},{name:"chile",value:"+56"},{name:"Egypt",value:"+20"},{name:"Haiti",value:"+509"},{name:"Mali",value:"+223"},{name:"Norway",value:"+47"},{name:"United Kingdom",value:"+44"}],m={getStatuses:d,getColors:e,getCountryCodes:f,getMuteTimes:g,getMuteTime:h};return m}angular.module("app.core").factory("sharedData",a),a.$inject=["$q","exception","logger"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a,b){switch(b){case"default":a.sort(function(a,b){return new Date(b.modifiedDate)-new Date(a.modifiedDate)});break;case"alphabetical":a.sort(function(a,b){var c=b.name.toLowerCase(),d=a.name.toLowerCase();return c>d?-1:d>c?1:0});break;case"custom":a.sort(function(a,b){return a.sortOrder-b.sortOrder});break;case"members-low":a.sort(function(a,b){return a.membersCount-b.membersCount});break;case"members-high":a.sort(function(a,b){return b.membersCount-a.membersCount})}}function i(a,b){var c=e.open({templateUrl:"app/modals/modals-alerts.html",controller:"Modal.alerts",controllerAs:"vm",size:"md",windowClass:"alert-modal",resolve:{alertType:function(){return a.alertType},alertTitle:function(){return a.alertTitle},alertMessage:function(){return a.alertMessage},acceptButton:function(){return a.acceptButton}}});c.result.then(function(a){b(a)})}function j(){return k(),d.when(m)}function k(){var b,c=a.innerWidth;480>=c?b="xxs":c>=481&&768>c?b="xs":c>=768&&992>c?b="sm":c>=992&&1200>c?b="md":c>=1200&&(b="lg"),b!=m&&(m=b,l("sharedServices:respond",m)),l("sharedServices:resized",null)}function l(a,b){c.$broadcast(a,b)}var m="";angular.element(a).bind("resize",function(){k(),l("sharedServices:resized",null)});var n={getSortingValue:h,callAlertModal:i,getRespondSize:j};return n}angular.module("app.core").factory("sharedServices",a),a.$inject=["$window","$timeout","$rootScope","$q","$uibModal","exception","logger"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(){function a(a){return ca.users[b]={profile:a.data},a.data}var b=i.getCurrentUserId(),d=["users",b];return N(ca,d),void 0===ca.users[b].profile?c.get(da.userProfile({userId:b})).then(a)["catch"](g.catcher("XHR Failed for getCurrentUsers")):e.when(angular.copy(ca.users[b].profile))}function m(a){function b(b){for(var c=0;c<b.data.length;c++)b.data[c].id===a&&(d=b.data[c]);return ca.users[a]={profile:d},d}var d=null,f=["users",a];return N(ca,f),void 0===ca.users[a].profile?c.get(da.userProfiles).then(b)["catch"](g.catcher("XHR Failed for getUserProfiles")):e.when(angular.copy(ca.users[a].profile))}function n(){function a(a){return ca.users[b].stats=a.data,a.data}var b=i.getCurrentUserId(),d=["users",b];return N(ca,d),void 0===ca.users[b].stats?c.get(da.userStats({userId:b})).then(a)["catch"](g.catcher("XHR Failed for getUsersStats")):e.when(angular.copy(ca.users[b].stats))}function o(a){var c=["users",a.userId];if(N(ca,c),void 0!==ca.users[a.userId].profile)switch(a.type){case"status":ca.users[a.userId].profile.koreStatus=a.data;break;case"statusMessage":ca.users[a.userId].profile.statusMessage=a.data}b.$broadcast("appData:profileUpdated",null)}function p(){var a,c,d=i.getCurrentUserId(),e=0;if(void 0!==ca.users[d].threads)for(var f=0;f<ca.users[d].threads.length;f++)0!==ca.users[d].threads[f].unreadCount&&e++;void 0!==ca.users[d].stats&&(ca.users[d].stats.messages.unread=e);for(var g in ca.spaces){if(a=0,c=0,void 0!==ca.spaces[g].threadsData){for(var h=0;h<ca.spaces[g].threadsData.length;h++)0!==ca.spaces[g].threadsData[h].unreadCount&&a++;ca.users[d].stats.spaces[g].unread.threads=a}if(void 0!==ca.spaces[g].roomsData){for(var j=0;j<ca.spaces[g].roomsData.length;j++)0!==ca.spaces[g].roomsData[j].unreadCount&&c++;ca.users[d].stats.spaces[g].unread.posts=c}}b.$broadcast("appData:statsUpdated",null)}function q(a,b){function d(b){return P(b.data.threads),"user"===a?(ca.users[j].threads=b.data.threads,ca.users.threads={}):(ca.spaces[k].threadsData=b.data.threads,ca.spaces[k].threads={}),b.data.threads}var f,h,j=i.getCurrentUserId(),k=void 0===b?Y.selectedSpace:b;return"user"===a?(f=da.userThreads({userId:j}),h=ca.users[j].threads):(f=da.spaceThreads({spaceId:k}),h=ca.spaces[k].threadsData),void 0===h?c.get(f).then(d)["catch"](g.catcher("XHR Failed for getMessageList")):e.when(h)}function r(a,b,d){function f(c){return Q(c.data.messages),j=c.data.messages,"user"===b?(void 0===ca.users.threads&&(ca.users.threads={}),ca.users.threads[a]=j):(void 0===ca.spaces[k].threads[a]&&(ca.spaces[k].threads[a]={}),ca.spaces[k].threads[a]=j),angular.copy(j)}var h,i,j=null,k=void 0===d?Y.selectedSpace:d;return"user"===b?(h=da.userThread({threadId:a}),i=ca.users.threads[a]):(h=da.spaceThread({spaceId:k,threadId:a}),i=ca.spaces[k].threads[a]),void 0===i?c.get(h).then(f)["catch"](g.catcher("XHR Failed for getMessages")):e.when(angular.copy(i))}function s(a,b,c){var d=null;delete a.newMessage,"user"===b?(d=["users","threads"],N(ca,d),void 0===ca.users.threads[a.threadId]?q(b).then(function(){r(a.threadId,b).then(function(){ca.users.threads[a.threadId].push(a)})}):ca.users.threads[a.threadId].push(a)):(d=["spaces",c,"threads"],N(ca,d),void 0===ca.spaces[c].threads[a.threadId]?q(b,c).then(function(){r(a.threadId,b,c).then(function(){ca.spaces[c].threads[a.threadId].push(a)})}):ca.spaces[c].threads[a.threadId].push(a))}function t(a,b,c){function d(b){for(var c=0;c<b.length;c++)b[c].threadId===a.threadId&&(b[c]=a);p()}var e,f=i.getCurrentUserId();"user"===b?(e=["users",f],N(ca,e),void 0===ca.users[f].threads?q(b,c).then(function(){d(ca.users[f].threads)}):d(ca.users[f].threads)):(e=["spaces",c],N(ca,e),void 0===ca.spaces[c].threadsData?q(b,c).then(function(){d(ca.spaces[c].threadsData)}):d(ca.spaces[c].threadsData))}function u(){return X}function v(){function a(a){return ca.users[b].spaces=a.data,a.data}var b=i.getCurrentUserId();return void 0===ca.users[b].spaces?c.get(da.userSpaces({userId:b})).then(a)["catch"](g.catcher("XHR Failed for getSpacesList")):e.when(angular.copy(ca.users[b].spaces))}function w(a){var b=i.getCurrentUserId(),c=["users",b];if(N(ca,c),void 0!==ca.users[b].spaces)for(var d=0;d<ca.users[b].spaces.spaces.length;d++)ca.users[b].spaces.spaces[d].id===a.id&&(ca.users[b].spaces.spaces[d]=a)}function x(a){function b(b){return e=b.data,_=angular.copy(b.data.spaces[0]),d=void 0!==a?a-e.spaces.length:e.count<=X.limit?e.count-e.spaces.length:X.more-e.spaces.length,A(b.data.spaces.length,d,0).then(function(a){return e.spaces=e.spaces.concat(a),ca.spaces.spacesData=e,angular.copy(e)})}var d=0,e=null;return c.get(da.spaces).then(b)["catch"](g.catcher("XHR Failed for getSpaces"))}function y(a){function b(b){for(var c=0;c<b.data.spaces.length;c++)b.data.spaces[c].id===a&&(d=b.data.spaces[c]);if(null===d)for(var e=0;e<ca.spaces.spacesData.spaces.length;e++)ca.spaces.spacesData.spaces[e].id===a&&(d=ca.spaces.spacesData.spaces[e]);return v().then(function(a){for(var b=0;b<a.spaces.length;b++)a.spaces[b].id===d.id&&(d.userStatus=a.spaces[b].userStatus,d.requesttojoin=a.spaces[b].requesttojoin);return angular.copy(d)})}var d=null,e=["spaces",a];return N(ca,e),c.get(da.spaces).then(b)}function z(a){var c=i.getCurrentUserId(),d=["users",c];if(N(ca,d),void 0!==ca.users[c].spaces){if(a.requesttojoin===!0)ca.users[c].spaces.spaces.push(a);else for(var e=0;e<ca.users[c].spaces.spaces.length;e++)ca.users[c].spaces.spaces[e].id===a.id&&ca.users[c].spaces.spaces.splice(e,1);b.$broadcast("appData:spacesUpdated",null)}}function A(b,c,d){function f(a,c){function d(a){var c="sid-"+(b+i);return c}function e(){var a=["Corporate Affairs","Promotions","Staffing","New Prospects","Investment","Office","Human resources","Product Design","Design Asset Management","Marketing","Bugs","London Office","User Feedback","Growth","Events","Sales","Workflows","Recruiting","Silicon Valley"],b=a[h];return h===a.length-1?h=0:h++,b}function f(){var a=j.getColors(),b=a[T(0,a.length-1)];return b}function k(){var a=T(1,200);return a}a.id=d(i),a.name=e(),a.color=f(),a.membersCount=k(),g.push(a)}for(var g=[],h=0,i=0;c>i;i++){var k=angular.copy(_);f(k,i)}return a(function(){return e.when(g)},d)}function B(b,c,d){var e,f=[],g=new RegExp(c,"gi");return A(0,b,0).then(function(b){for(var c=0;c<b.length;c++)e=b[c].name,-1!=e.search(g)&&f.push(b[c]);return getSortingValue(f,d),a(function(){return f},$)})}function C(b,c){var d=b;return getSortingValue(d,c),a(function(){return d},$)}function D(a){function b(b){return R(a,b.data.participatingTopics.rooms),ca.spaces[a].roomsData=b.data.participatingTopics.rooms,ca.spaces[a].rooms={},b.data.participatingTopics.rooms}var d=["spaces",a];return N(ca,d),void 0===ca.spaces[a].roomsData?c.get(da.rooms({spaceId:a})).then(b)["catch"](g.catcher("XHR Failed for getRoomsList")):e.when(ca.spaces[a].roomsData)}function E(a,b){function d(c){S(a,b,c.data.posts),ca.spaces[a].rooms[b].postsData=c.data.posts;for(var d=0;d<c.data.posts.length;d++)ca.spaces[a].rooms[b][c.data.posts[d].postId]={};return angular.copy(c.data.posts)}var f=["spaces",a,"rooms",b];return N(ca,f),void 0===ca.spaces[a].rooms[b].postsData?c.get(da.posts({spaceId:a,roomId:b})).then(d)["catch"](g.catcher("XHR Failed for getPosts")):e.when(angular.copy(ca.spaces[a].rooms[b].postsData))}function F(a,b,d){function f(c){return ca.spaces[a].rooms[b][d].comments=c.data.comments,angular.copy(c.data.comments)}return void 0===ca.spaces[a].rooms[b][d].comments?c.get(da.comments({spaceId:a,roomId:b,postId:d})).then(f)["catch"](g.catcher("XHR Failed for getComments")):e.when(angular.copy(ca.spaces[a].rooms[b][d].comments))}function G(a,b,c){var d=["spaces",c,"rooms",b.roomId];N(ca,d),delete a.newPost,void 0===ca.spaces[c].rooms[b.roomId].postsData?D(c).then(function(){E(c,b.roomId).then(function(){ca.spaces[c].rooms[b.roomId].postsData.push(a)})}):ca.spaces[c].rooms[b.roomId].postsData.push(a)}function H(a,b,c){function d(){for(var d=0;d<ca.spaces[c].rooms[b.roomId].postsData.length;d++)ca.spaces[c].rooms[b.roomId].postsData[d].postId===a.postId&&(ca.spaces[c].rooms[b.roomId].postsData[d].likes=a.likes,ca.spaces[c].rooms[b.roomId].postsData[d].likesCount=a.likesCount)}var e=["spaces",c,"rooms",b.roomId];N(ca,e),void 0===ca.spaces[c].rooms[b.roomId].postsData?D(c).then(function(){E(c,b.roomId).then(function(){d()})}):d()}function I(a,b){var c=["spaces",b];if(N(ca,c),void 0!==ca.spaces[b].roomsData){for(var d=0;d<ca.spaces[b].roomsData.length;d++)ca.spaces[b].roomsData[d].roomId===a.roomId&&(ca.spaces[b].roomsData[d]=a);p()}}function J(a,b,c,d){function e(){for(var a=0;a<ca.spaces[d].rooms[c.roomId].postsData.length;a++)ca.spaces[d].rooms[c.roomId].postsData[a].postId===b.postId&&ca.spaces[d].rooms[c.roomId].postsData[a].commentsCount++}var f=["spaces",d,"rooms",c.roomId,b.postId];N(ca,f),void 0===ca.spaces[d].rooms[c.roomId][b.postId].comments?D(d).then(function(){E(d,c.roomId).then(function(){b.commentsCount>1?F(d,c.roomId,b.postId).then(function(){ca.spaces[d].rooms[c.roomId][b.postId].comments.unshift(a),e()}):(ca.spaces[d].rooms[c.roomId][b.postId].comments=[a],e())})}):(ca.spaces[d].rooms[c.roomId][b.postId].comments.unshift(a),e())}function K(a){function b(b){for(var c=null,d=0;d<b.data.length;d++)b.data[d].clientId===a&&(c=b.data[d]);return c}return c.get(da.externalBots).then(b)["catch"](g.catcher("XHR Failed for getExternalBot"))}function L(){return e.when(Y)}function M(a){for(var c in a)a.hasOwnProperty(c)&&Y.hasOwnProperty(c)&&("spaceFilter"===c?Y[c][Y.selectedSpace]=a[c]:Y[c]=a[c]);b.$broadcast("appData:statesUpdate",null)}function N(a,b){for(var c=0;c<b.length;c++)a=a[b[c]]=a[b[c]]||{}}function O(a){var b=V||U();return b.then(function(){return e.all(a)})["catch"](g.catcher('"ready" function failed'))}function P(a){if(Z===!0){var b,c,d;a.sort(function(a,b){return new Date(b.lastActivity)-new Date(a.lastActivity)});for(var e=0;e<a.length;e++)b=new Date,c=new Date(a[e].lastActivity),c.setMonth(b.getMonth(),b.getDate()-T(e,e+e)),d=c.toISOString(),a[e].lastActivity=d,aa[a[e].threadId]=d}}function Q(a){if(Z===!0){var b,c;a.sort(function(a,b){return new Date(b.sentOn)-new Date(a.sentOn)});for(var d=0;d<a.length;d++)void 0!==aa[a[d].threadId]&&(b=new Date(aa[a[d].threadId]),b.setMonth(b.getMonth(),b.getDate()),b.setHours(b.getHours()-d),c=b.toISOString(),a[d].sentOn=c)}}function R(a,b){if(Z===!0){var c,d,e;void 0===ba[a]&&(ba[a]={});for(var f=0;f<b.length;f++)c=new Date,d=new Date(b[f].lastModified),d.setMonth(c.getMonth(),c.getDate()-T(f,f+f)),e=d.toISOString(),b[f].lastModified=e,ba[a][b[f].roomId]=e}}function S(a,b,c){if(Z===!0){var d,e;c.sort(function(a,b){return new Date(b.createdOn)-new Date(a.createdOn)});for(var f=0;f<c.length;f++)d=new Date(ba[a][b]),d.setMonth(d.getMonth(),d.getDate()),d.setHours(d.getHours()-f),e=d.toISOString(),c[f].createdOn=e}}function T(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function U(){function a(){W=!0}return V?V:V=e.when(!0).then(a)}var V,W=!1,X={limit:100,more:100},Y={spaceFilter:{},messagesFilter:null,selectedSpace:null,selectedRoom:null,selectedRoomData:null,selectedThread:null,selectedThreadData:null},Z=!0,$=2e3,_=null,aa={},ba={},ca={spaces:{},users:{}},da={userProfile:f("data/users/{{userId}}/profile.json"),userProfiles:"data/users/users.json",userStats:f("data/users/{{userId}}/stats.json"),userThreads:f("data/users/{{userId}}/threads.json"),userThread:f("data/users/threads/{{threadId}}.json"),userSpaces:f("data/users/{{userId}}/spaces.json"),spaces:"data/spaces/spaces.json",spaceThreads:f("data/spaces/{{spaceId}}/threads.json"),spaceThread:f("data/spaces/{{spaceId}}/threads/{{threadId}}.json"),rooms:f("data/spaces/{{spaceId}}/rooms.json"),posts:f("data/spaces/{{spaceId}}/rooms/{{roomId}}/posts.json"),likes:f("data/spaces/{{spaceId}}/rooms/{{roomId}}/{{postId}}/likes.json"),comments:f("data/spaces/{{spaceId}}/rooms/{{roomId}}/{{postId}}/comments.json"),externalBots:"data/external-bots/external-bots.json"},ea={getCurrentUser:l,getUserProfile:m,getUserStats:n,updateUserProfile:o,updateUserStats:p,getMessageList:q,getMessages:r,updateMessages:s,updateMessageList:t,getSpacesSettings:u,getUserSpaces:v,updateUserSpaces:w,getAllSpaces:x,getSpace:y,requestSpace:z,getNewSpaces:A,searchSpaces:B,sortAllSpaces:C,getRoomsList:D,getPosts:E,getComments:F,createPost:G,updateLikes:H,updateRoomsList:I,updateComments:J,getExternalBot:K,getDataStates:L,setDataStates:M,ready:O};return ea}angular.module("app.core").factory("appData",a),a.$inject=["$timeout","$rootScope","$http","$location","$q","$interpolate","exception","logger","security","sharedData","sharedServices"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a){a=a||"/",c.path(a)}function i(){var a=[{id:"uid-00",name:"Monica Crew",email:"monica@kore.com",photo:"monica.png",type:"default"},{id:"uid-00",name:"Monica Crew",email:"monica.crew@yahoo.com",photo:"monica.png",type:"facebook"},{id:"uid-01",name:"Russ Hanneman",email:"russ@kore.com",photo:"monica.png",type:"google"}];return e.when(a)}function j(a,b){a.phone===!1?"monica@kore.com"==a.emailPhone?(v="uid-00",w="1234",z=!0,b.success(!0)):"russ@kore.com"==a.emailPhone?(v="uid-01",w="1234",z=!0,b.success(!0)):"monica.crew@kore.com"==a.emailPhone?b.moreRequired("credentials"):b.moreRequired("sign-up"):"123-456-7890"==a.emailPhone?(v="uid-00",w="1234",z=!0,b.success(!0)):"555-555-5555"==a.emailPhone?b.moreRequired("credentials"):b.moreRequired("sign-up")}function k(a,b){a.phone===!1?"monica.crew@kore.com"==a.emailPhone&&"password"===a.pass?(v="uid-00",w="1234",z=!0,b.success(!0)):b.error(!0):"555-555-5555"==a.emailPhone&&"password"===a.pass?(v="uid-00",w="1234",z=!0,b.success(!0)):b.error(!0)}function l(a,b){a.phone!==!0?b.success("verify-email"):b.success("verify-phone")}function m(){z=!1,v=null,w=null,a.$broadcast("security:unauthenticated",null)}function n(){a.$broadcast("security:authenticated",null),d(function(){h(y)},100)}function o(){z===!0&&n()}function p(){return v}function q(){return w}function r(){return A}function s(){return B}function t(){return z}function u(){return x}var v=null,w=null,x="default",y="/messages",z=!1,A=2e3,B=!1;"/admin"===c.path()&&(z=!0,B=!0,y="/admin"),z===!0&&(v="uid-00",w="1234",n());var C={getMultiUsers:i,autoLogin:j,login:k,signUp:l,logout:m,completeAuthentication:o,isAuthenticated:t,getCurrentUserId:p,getCurrentAuthToken:q,getAuthTime:r,getLoginScreen:u,getAdminRequested:s};return C}angular.module("app.core").factory("security",a),a.$inject=["$rootScope","$http","$location","$timeout","$q","exception","logger"]}(),function(){"use strict";function a(a){return a()}angular.module("app.core").factory("socket",a),a.$inject=["socketFactory"]}(),function(){"use strict";function a(a,b,c,d,e,f){f.on("send:profile",function(a){e.updateUserProfile(angular.copy(a))}),f.on("send:message",function(b){e.updateMessages(angular.copy(b.messageData),b.messagesType,b.spaceId),e.updateMessageList(angular.copy(b.threadData),b.messagesType,b.spaceId),a.$broadcast("socketEvents:sendMessage",angular.copy(b))}),f.on("update:messageList",function(b){e.updateMessageList(angular.copy(b.threadData),b.messagesType,b.spaceId),a.$broadcast("socketEvents:messageList",angular.copy(b))}),f.on("post:create",function(b){e.createPost(angular.copy(b.postData),b.roomData,b.spaceId),e.updateRoomsList(angular.copy(b.roomData),b.spaceId),a.$broadcast("socketEvents:createPost",angular.copy(b))}),f.on("post:like",function(b){e.updateLikes(angular.copy(b.postData),b.roomData,b.spaceId),a.$broadcast("socketEvents:postLikes",angular.copy(b))}),f.on("post:comment",function(b){e.updateComments(angular.copy(b.comment),b.postData,b.roomData,b.spaceId),a.$broadcast("socketEvents:postComment",angular.copy(b))});var g={};return g}angular.module("app.core").factory("socketEvents",a),a.$inject=["$rootScope","$timeout","config","logger","appData","socket"]}(),function(){"use strict";function a(a,c){function d(a){var b="Confirm Delete";a=a||"item";var c="Delete "+a+"?";return e(b,c)}function e(c,d,e,f){var g={templateUrl:"modalDialog.tpl.html",controller:b,keyboard:!0,resolve:{options:function(){return{title:c,message:d,okText:e,cancelText:f}}}};return a.open(g).result}var f={deleteDialog:d,confirmationDialog:e};return c.put("modalDialog.tpl.html",'<div>    <div class="modal-header">        <button type="button" class="close" data-dismiss="modal"             aria-hidden="true" data-ng-click="cancel()">&times;</button>        <h3>{{title}}</h3>    </div>    <div class="modal-body">        <p>{{message}}</p>    </div>    <div class="modal-footer">        <button class="btn btn-primary" data-ng-click="ok()">{{okText}}</button>        <button class="btn btn-info" data-ng-click="cancel()">{{cancelText}}</button>    </div></div>'),f}function b(a,b,c){a.title=c.title||"Title",a.message=c.message||"",a.okText=c.okText||"OK",a.cancelText=c.cancelText||"Cancel",a.ok=function(){b.close("ok")},a.cancel=function(){b.dismiss("cancel")}}angular.module("app.core").factory("bootstrap.dialog",a),a.$inject=["$uibModal","$templateCache"],b.$inject=["$scope","$uibModalInstance","options"]}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";function a(a,b,c){function d(a,b,d){var e=0,f=350;a.startTiming&&(e=a.startTiming),a.endTiming&&(f=a.endTiming+e),a.$watch("value",function(a,d){a!=d&&(c(function(){b.addClass("changed").blur()},e),c(function(){b.removeClass("changed"),b.html(a)},f))})}var e={restrict:"A",link:d,scope:{value:"=",startTiming:"@?",endTiming:"@?"}};return e}angular.module("app.widgets").directive("animateOnChange",a),a.$inject=["$http","$compile","$timeout"]}(),function(){"use strict";function a(a,b,c){function d(c,d,e){c.$watch("url",function(){a.get(c.url).then(function(a){d.html(a.data),b(d.contents())(c)})})}var e={restrict:"A",link:d,scope:{url:"="}};return e}angular.module("app.widgets").directive("customInclude",a),a.$inject=["$http","$compile","$timeout"]}(),function(){"use strict";function a(){function a(a,b,c){function d(a){a.preventDefault();var c=b.parent().parent().find(".widget-content"),d=b.children("i");c.hasClass("minimized")?(d.removeClass("fa fa-chevron-down"),d.addClass("fa fa-chevron-up")):(d.removeClass("fa fa-chevron-up"),d.addClass("fa fa-chevron-down")),c.toggleClass("minimized")}c.$set("href","#"),c.$set("wminimize"),b.click(d)}var b={link:a,template:'<i class="fa fa-chevron-down"></i>',restrict:"A"};return b}angular.module("app.widgets").directive("widgetMinimize",a)}(),function(){"use strict";function a(a){function b(b,c,d){function e(){a.getUserProfile(b.profileId).then(function(a){b.profile=a,b.profile.initials=b.profile.firstName.charAt(0)+b.profile.lastName.charAt(0),"no-avatar"===b.profile.profImage?b.profile.image=!1:b.profile.image=!0})}void 0===b.plus&&(b.plus=0),b.$watch("profileId",function(){e()},!0),b.$on("appData:profileUpdated",e)}var c={link:b,templateUrl:"app/widgets/widget-profile-photo.html",restrict:"A",scope:{profileId:"=",plus:"=?"}};return c}angular.module("app.widgets").directive("widgetProfilePhoto",a),a.$inject=["appData"]}(),function(){"use strict";function a(a,c,d,e){function f(b,f,h){function i(a){b.$evalAsync(function(){"true"==h.scrollDown&&"mouseenter"!=a&&e(function(){$(f).scrollTop($(f).prop("scrollHeight"))},100),e(function(){f.perfectScrollbar("update")},30),e(function(){f.perfectScrollbar("update")},310)})}function j(){var b=f.prop("offsetWidth");a.$broadcast("perfectScrollbar:sticky",b)}function k(a){var b=f.prop("scrollHeight");if(0!==b)switch(a){case"instant":$(f).scrollTop(0);break;case"animate":e(function(){$(f).animate({scrollTop:0},600)},300)}}for(var l=angular.element(d),m={},n=!1,o=0,p=g.length;p>o;o++){var q=g[o];void 0!==h[q]&&(m[q]=c(h[q])())}if(b.$evalAsync(function(){var a=c(h.onScroll);f.perfectScrollbar(m),f.scroll(function(){var c=f.scrollTop(),d=f.prop("scrollHeight")-f.height();b.$apply(function(){a(b,{scrollTop:c,scrollHeight:d})})}),h.stickyItems&&j()}),f.bind("mouseenter",i("mouseenter")),h.refreshOnChange&&b.$watchCollection(h.refreshOnChange,function(){i(),h.refreshScroll&&k("instant"===h.refreshScroll?"instant":"animate")}),h.infiniteScroll){var r=c(h.infiniteScroll);$(document).on("ps-scroll-down",function(a){n=!0}),$(document).on("ps-y-reach-end",function(a){n===!0&&(r(b),n=!1)})}h.refreshOnResize&&l.on("resize",i),f.bind("$destroy",function(){l.off("resize",i),f.perfectScrollbar("destroy")}),b.$on("sharedServices:resized",j),b.$on("layout:animateUpdated",j)}var g=["wheelSpeed","wheelPropagation","minScrollbarLength","useBothWheelAxes","useKeyboard","suppressScrollX","suppressScrollY","scrollXMarginOffset","scrollYMarginOffset","includePadding","onScroll","scrollDown"],h={restrict:"EA",transclude:!0,template:"<div><div ng-transclude></div></div>",replace:!0,link:f,controller:b};return h}function b(){function a(a,b,c,e,f){d.items[a]={offset:b,status:c,height:e,offsetTop:f}}function b(a,b){var c=a+1,e=!1,f=null;void 0!==d.items[c]&&(f=d.items[c].height/2+d.items[c].offset,d.items[c].offsetTop<=f&&(e=!0)),b(e)}function c(a,b){var c=a+1,e=!1;void 0!==d.items[c]&&"sticky"===d.items[c].status&&(e=!0),b(e)}var d=this;d.items=[],d.setItem=a,d.checkOverlap=b,d.checkCover=c}angular.module("app.widgets").directive("perfectScrollbar",a),a.$inject=["$rootScope","$parse","$window","$timeout"]}(),function(){"use strict";function a(){function a(a,b,c,d){function e(a,c){c===!0?angular.element(b).addClass(a):angular.element(b).removeClass(a)}var f=b[0],g=angular.element(f).prop("offsetHeight"),h=null,i="free";a.$watch(function(){return h=b.offset().top},function(b,c){h<=Number(a.stickyOffset)?(i="sticky",e("sticky",!0)):(i="free",e("sticky",!1)),d.setItem(Number(a.stickyIndex),Number(a.stickyOffset),i,g,h),d.checkCover(Number(a.stickyIndex),function(a){e("covered",a)}),d.checkOverlap(Number(a.stickyIndex),function(a){e("overlapped",a)})})}var b={require:"^perfectScrollbar",restrict:"A",link:a,scope:{stickyOffset:"@",stickyIndex:"@"}};return b}angular.module("app.widgets").directive("stickyItem",a),a.$inject=[]}(),function(){"use strict";function a(a){function b(b,c,d){function e(){a(function(){g=angular.element(" > div",f).prop("offsetHeight"),void 0===g||0===g?f.style.height="auto":f.style.height=g+"px"},100)}var f=c[0],g=null;b.$watch(d.animateHeight,function(){e()}),b.$on("sharedServices:resized",e),b.$on("layout:animateUpdated",e)}var c={restrict:"A",link:b};return c}angular.module("app.widgets").directive("animateHeight",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a){function b(b,c,d){function e(){var a=null;h=angular.element(g).prop("offsetWidth");for(var c=0;c<b.respondImageSet.length;c++)2*h<=b.respondImageSet[c].width&&null===a&&(a=b.respondImageSet[c].url);i!==a&&f(a)}function f(b){null===i?(d.$set("afklLazyImage",b),i=b):(c.addClass("switching-image"),a(function(){d.$set("afklLazyImage",b),i=b},200),a(function(){c.removeClass("switching-image")},250))}var g=c[0],h=null,i=null;b.$watch("respondImageSet",function(){e()}),b.$on("sharedServices:resized",e),b.$on("layout:animateUpdated",e)}var c={restrict:"A",link:b,scope:{respondImageSet:"="}};return c}angular.module("app.widgets").directive("respondImage",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a,b,c){function d(a,b,c,d){a.$watch(function(){return d.currentTime},function(){0===d.currentTime?b.addClass("ng-hide"):b.removeClass("ng-hide")})}var e={require:"^videogular",restrict:"A",link:d};return e}angular.module("app.widgets").directive("hideControls",a),a.$inject=["$http","$compile","$timeout"]}(),function(){"use strict";function a(a){function b(a,b,c){function d(){var a=b[0].getBoundingClientRect();e={x:a.left,y:a.top,w:a.width}}var e=null,f=null;a.$watch(function(){return f=b.offset().top},function(a,b){d()}),b.bind("click",function(){var b={gallery:a.photoGallery,index:Number(a.photoIndex),location:e};a.showGallery({values:b})}),a.$on("sharedServices:resized",d),a.$on("layout:animateUpdated",d)}var c={restrict:"A",link:b,scope:{photoIndex:"@",photoGallery:"=",showGallery:"&"}};return c}angular.module("app.widgets").directive("photoItem",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a,b,c){function d(a,c,d,e,f){a.$watch("source",function(a){c.find("code").html(a),Prism.highlightElement(c.find("code")[0])}),f(function(d){void 0!==d.html()&&(c.find("code").html(d.html()),b(c.contents())(a.$parent))})}var e={restrict:"A",transclude:!0,template:"<code></code>",link:d,scope:{source:"@"}};return e}angular.module("app.widgets").directive("codeViewer",a),a.$inject=["$http","$compile","$timeout"]}(),function(){"use strict";function a(a){function b(b,c,d,e){var f,g,h,i,j;angular.element(c).click(function(c){f=angular.element(b.scrollContainer),g=angular.element(d.scrollToItem,b.scrollContainer),i=f[0].scrollTop,h=g.offset().top-Number(b.scrollOffset),j=i+h,angular.element(b.scrollContainer).animate({scrollTop:j},400),a(function(){g.focus();
},400)})}var c={restrict:"A",link:b,scope:{scrollContainer:"@",scrollOffset:"@"}};return c}angular.module("app.widgets").directive("scrollToItem",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a){function b(b,c,d,e){function f(){var b,e;i=angular.element(h).prop("offsetWidth"),480>=i?b="xxs":i>=481&&768>i?b="xs":i>=768&&992>i?b="sm":i>=992&&1200>i?b="md":i>=1200&&(b="lg"),b!=j&&a(function(){""===d.respondToWidth?g(h,b):(e=c[0].querySelectorAll("."+d.respondToWidth),angular.forEach(e,function(a,c){g(a,b)})),j=b},100)}function g(a,b){angular.element(a).removeClass(j),angular.element(a).addClass(b)}var h=c[0],i=null,j=null;f(),b.$on("sharedServices:resized",f),b.$on("layout:animateUpdated",f)}var c={restrict:"A",link:b};return c}angular.module("app.widgets").directive("respondToWidth",a),a.$inject=["$timeout"]}(),function(){"use strict";angular.module("app.layout",[])}(),function(){"use strict";function a(a,b,c,d,e){function f(){return b.when(m)}function g(a){"admin"===a?m=l:"default"===a&&(m=k)}function h(a,c){for(var d=null,e=0;e<m.length;e++)m[e].active===!0&&m[e][a]===c&&(d=m[e]);return b.when(d)}function i(a,b){for(var d=0;d<m.length;d++)m[d].content===a&&(j(m[d].location),m[d].active=!0,m[d].visible=b);c.$broadcast("layout:updated",m),e(function(){c.$broadcast("layout:animateUpdated",m)},300)}function j(a){for(var b=0;b<m.length;b++)m[b].location===a&&(m[b].active=!1,m[b].visible=!1),"all"===a&&(m[b].visible=!1)}var k=[{content:"header",active:!0,location:"header",visible:!0,template:"app/layout/header.html"},{content:"navigation",active:!0,location:"main-sidebar",visible:!0,template:"app/navigation/navigation.html"},{content:"contacts",active:!0,location:"view-sidebar",visible:!1,template:"app/contacts/contacts.html"},{content:"files",active:!1,location:"view-sidebar",visible:!1,template:"app/files/files.html"}],l=[{content:"header",active:!0,location:"header",visible:!0,template:"app/admin/layout/header.html"},{content:"navigation",active:!0,location:"main-sidebar",visible:!0,template:"app/admin/navigation/navigation.html"},{content:"none",active:!1,location:"view-sidebar",visible:!1,template:null}],m=k,n={getLayout:f,setLayout:g,getActiveLayout:h,updateVisible:i,deactivate:j};return n}angular.module("app.layout").factory("layout",a),a.$inject=["logger","$q","$rootScope","$window","$timeout"]}(),function(){"use strict";function a(a,b){function c(c,d,e){function f(){b.getActiveLayout("content",e.content).then(function(a){null!==a?(d.toggleClass("active"),b.updateVisible(e.content,!a.visible)):(d.addClass("active"),b.updateVisible(e.content,!0))})}d.bind("click",f),a.$on("layout:updated",function(a,b){for(var c=0;c<b.length;c++)b[c].content===e.content&&(b[c].visible===!0?d.addClass("active"):d.removeClass("active"))})}var d={restrict:"A",link:c};return d}angular.module("app.layout").directive("changeLayout",a),a.$inject=["$rootScope","layout"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l){function m(){u.showSplash=!0,u.isAuthenticated=k.isAuthenticated(),u.admin===!0&&(h.setLayout("admin"),u.singleView=!1),p(),o(),q()}function n(){u.isAuthenticated=k.isAuthenticated(),u.showSplash=!0,c(function(){u.showLayout=!1,u.respondSize=null,u.mainSidebar={},u.viewSidebar={}},300),c(function(){u.showSplash=!1,e.path("/")},u.authorizationTime)}function o(){h.getActiveLayout("location","header").then(function(a){u.header=a}),h.getActiveLayout("location","main-sidebar").then(function(a){u.mainSidebar=a}),h.getActiveLayout("location","view-sidebar").then(function(a){u.viewSidebar=a})}function p(){j.getRespondSize().then(function(a){u.respondSize=a,"xs"===u.respondSize?h.deactivate("all"):u.admin===!0&&"xxs"!==u.respondSize&&h.updateVisible("navigation",!0)})}function q(){u.showLayout=!0,c(function(){u.showSplash=!1},u.authorizationTime)}function r(a,b,c){void 0!==b.settings&&(b.settings.hasOwnProperty("singleView")&&(u.singleView=b.settings.singleView),b.settings.hasOwnProperty("alwaysSplash")&&b.settings.alwaysSplash===!0&&u.isAuthenticated&&(u.showSplash=!0,q()))}function s(){a.open("/#/admin")}function t(){a.open("https://support.kore.com/hc/en-us")}var u=this;u.authorizationTime=k.getAuthTime(),u.isAuthenticated=k.isAuthenticated(),u.admin=k.getAdminRequested(),u.showSplash=!1,u.showLayout=!1,u.singleView=!0,u.respondSize=null,u.header={},u.mainSidebar={},u.viewSidebar={},u.authorizationTime=k.getAuthTime(),u.openAdmin=s,u.openHelp=t,u.isAuthenticated===!0&&(void 0!==d.current.settings&&d.current.settings.hasOwnProperty("singleView")&&(u.singleView=d.current.settings.singleView),m()),b.$on("$routeChangeStart",r),b.$on("security:authenticated",m),b.$on("security:unauthenticated",n),b.$on("layout:updated",o),b.$on("sharedServices:respond",p)}angular.module("app.layout").controller("Shell",a),a.$inject=["$window","$scope","$timeout","$route","$location","config","logger","layout","appData","sharedServices","security","socketEvents"]}(),function(){"use strict";angular.module("app.login",[])}(),function(){"use strict";function a(a){a.configureRoutes(b())}function b(){return[{url:"/",config:{title:"Login",templateUrl:"app/login/login.html",settings:{singleView:!0,alwaysSplash:!1}}}]}angular.module("app.login").run(a),a.$inject=["routehelper"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(){C.isAuthenticated===!0&&d.path("/messages"),i.getMultiUsers().then(function(a){C.multiUsers=a})}function m(){C.loginComplete=!0,c(function(){i.completeAuthentication()},350)}function n(a){C.formType=a,C.formTitle=C.formTitles[a]}function o(a){C.multiUsers.splice(a,1)}function p(a){C.displayCountryCodes=a}function q(a){C.selectedCountryCode=a}function r(){var a={phone:C.displayCountryCodes,emailPhone:C.autoLoginForm.emailPhone.$modelValue};i.autoLogin(a,{success:function(){m()},moreRequired:function(a){c(function(){n(a)},500)}})}function s(a){var b={phone:!1,emailPhone:a};i.autoLogin(b,{success:function(){m()}})}function t(){var a={phone:C.displayCountryCodes,emailPhone:C.loginForm.emailPhone.$modelValue,pass:C.loginForm.pass.$modelValue};C.error=!1,i.login(a,{success:function(){m()},error:function(){C.error=!0}})}function u(){}function v(){var a={phone:C.displayCountryCodes,emailPhone:C.signUpForm.emailPhone.$modelValue,firstName:C.signUpForm.firstName.$modelValue,lastName:C.signUpForm.lastName.$modelValue,pass:C.signUpForm.pass.$modelValue,passConfirm:C.signUpForm.passConfirm.$modelValue};i.signUp(a,{success:function(a){c(function(){n(a)},500)}})}function w(){C.codeSent="Code sent",c(function(){C.codeSent="Resend Code"},5e3)}function x(){C.emailSent="email sent",c(function(){C.emailSent="Resend"},5e3)}function y(){var a={phone:!1,emailPhone:"monica@kore.com"};i.autoLogin(a,{success:function(){m()}})}function z(){C.emailPhone=null,C.displayCountryCodes=!1,n("default")}function A(){var a;a=C.displayCountryCodes===!1?{alertType:"info",alertTitle:"Change your email?",alertMessage:"You’ll need to re-enter your information and verify your new email. Your old email will no longer work with this account.",acceptButton:"Change"}:{alertType:"info",alertTitle:"Change your mobile number?",alertMessage:"You’ll need to re-enter your information and verify your new mobile number. Your old mobile number will no longer work with this account.",acceptButton:"Change"},j.callAlertModal(a,function(a){z()})}function B(){e.open({templateUrl:"app/modals/modals.html",controller:"Modal.version",controllerAs:"vm",size:"md"})}var C=this;C.isAuthenticated=i.isAuthenticated(),C.multiUsers=null,C.emailSent="Resend",C.codeSent="Resend Code",C.formType=i.getLoginScreen(),C.formTitles={"default":"Work simply.",credentials:"Sign in",multi:"Choose your account",forgot:"Forgot your password?","sign-up":"Sign up","verify-email":"Almost done! Please verify your email.","verify-phone":"Almost done! Please verify your phone number."},C.formTitle=C.formTitles[C.formType],C.emailPhone=null,C.autoLoginForm=null,C.loginForm=null,C.signUpForm=null,C.countryCodes=k.getCountryCodes(),C.selectedCountryCode=C.countryCodes[0],C.searchCountryCodes="",C.displayCountryCodes=!1,C.loginComplete=!1,C.error=!1,C.switchForms=n,C.removeSession=o,C.phoneCode=p,C.selectCountryCode=q,C.submitAutoLogin=r,C.submitMultiLogin=s,C.submitLogin=t,C.submitResetLink=u,C.submitSignUp=v,C.resendCode=w,C.resendEmail=x,C.submitPhoneCode=y,C.cancel=z,C.changeEmailPhone=A,C.openVersionModal=B,l()}angular.module("app.login").controller("Login",a),a.$inject=["$rootScope","$scope","$timeout","$location","$uibModal","config","logger","layout","security","appData","sharedData"]}(),function(){"use strict";function a(){function a(a,b,c,d){function e(a){return a.length>=4&&a.length<=6?a=a.replace(/(\d{3})(\d{3})?/,"$1-$2"):a.length>=7&&a.length<=20&&(a=a.replace(/(\d{3})(\d{3})(\d{4})?/,"$1-$2-$3")),a}function f(a,b){var c=!1;c=b===!0?h.test(a):i.test(a),d.$setValidity("invalidFormat",c)}var g=/^\d+$/,h=/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/,i=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,j=!1;d.$parsers.push(function(b){var c=b.replace(/-/g,"");return b.length>0&&(g.test(c)?(d.$setViewValue(e(c)),j=c.length>=3||j===!0?!0:!1):j=!1),"+"===b.substring(0,1)&&(j=!0,d.$setViewValue("")),d.$render(),a.phoneCodes({value:j}),f(b,j),b})}var b={require:"ngModel",restrict:"A",link:a,scope:{phoneCodes:"&?"}};return b}angular.module("app.login").directive("emailPhone",a)}(),function(){"use strict";angular.module("app.navigation",[])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(){g.getCurrentUser().then(function(a){v.currentUser=a,v.setStatus===!1&&(s(v.currentUser.koreStatus),v.setStatus=!0),m()})}function m(){g.getUserStats().then(function(a){v.userStats=a,n()})}function n(){g.getUserSpaces().then(function(a){o(a),i.getSortingValue(a.spaces,a.sortBy),v.spacesList=a})}function o(a){function b(a){var b=null,c=0;if(v.userStats.spaces.hasOwnProperty(a.id)){b=v.userStats.spaces[a.id].unread;for(var d in b)b.hasOwnProperty(d)&&(c+=b[d]);a.unreadCount=c}}for(var c=0;c<a.spaces.length;c++)b(a.spaces[c]),g.updateUserSpaces(a.spaces[c])}function p(a){b.path("spaces/"+a)}function q(){v.overlay=!v.overlay,v.profileMenuOpen=!v.profileMenuOpen}function r(a){13===a.which&&j.emit("send:profile",{userId:v.currentUser.id,type:"statusMessage",data:v.currentUser.statusMessage})}function s(a){j.emit("send:profile",{userId:v.currentUser.id,type:"status",data:a})}function t(){d.open({templateUrl:"app/modals/modals.html",controller:"Modal.accountSettings",controllerAs:"vm",size:"md"})}function u(){k.logout()}var v=this;v.selectedMenu=b.$$path,v.statuses=h.getStatuses(),v.spacesList=[],v.userStats=null,v.currentUser=null,v.setStatus=!1,v.selectedSpace=null,v.overlay=!1,v.profileMenuOpen=!1,v.selectSpace=p,v.toggleProfileMenu=q,v.changeStatusMessage=r,v.changeStatus=s,v.accountSettings=t,v.logout=u,l(),a.$on("appData:profileUpdated",l),a.$on("appData:statsUpdated",m),a.$on("appData:spacesUpdated",m),a.$on("$routeChangeSuccess",function(){v.selectedMenu=b.$$path})}angular.module("app.navigation").controller("Navigation",a),a.$inject=["$scope","$location","$timeout","$uibModal","config","logger","appData","sharedData","sharedServices","socket","security"]}(),function(){"use strict";angular.module("app.messages",[])}(),function(){"use strict";function a(a){a.configureRoutes(b())}function b(){return[{url:"/messages",config:{title:"Messages",templateUrl:"app/messages/messages.html",settings:{singleView:!1,alwaysSplash:!1},loginRequired:!0}}]}angular.module("app.messages").run(a),a.$inject=["routehelper"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(){h.getDataStates().then(function(a){null!==a.messagesFilter&&(n.selectedFilter=a.messagesFilter)})}function l(a){n.selectedFilter=a,h.setDataStates({messagesFilter:n.selectedFilter})}function m(a){n.viewActive=a}var n=this;n.selectedFilter="people",n.messagesType="user",n.viewActive=!1,n.selectFilter=l,n.activateView=m,k()}angular.module("app.messages").controller("Messages",a),a.$inject=["$rootScope","$scope","$templateCache","$timeout","$uibModal","config","logger","appData","sharedServices","socket"]}(),function(){"use strict";function a(){var a={restrict:"EA",controller:b,controllerAs:"vm",bindToController:!0,scope:{messagesType:"=",activateView:"&",spaceId:"=?"},templateUrl:"app/messages/message-list.html"};return a}function b(a,b,c,d,e,f,g,h,i){function j(){f.getCurrentUser().then(function(a){r.currentUser=a,k()})}function k(){f.getMessageList(r.messagesType).then(function(a){a.length>0?(a.sort(function(a,b){return new Date(b.lastActivity)-new Date(a.lastActivity)}),m(a),l(a[0].threadId)):f.setDataStates({selectedThread:null,selectedThreadData:null})})}function l(a){var b=r.messageListRef[a];r.messageList[b].unreadCount=0,r.currentThread=a,r.currentThreadData=r.messageList[r.messageListRef[a]],f.setDataStates({selectedThread:r.currentThread,selectedThreadData:r.currentThreadData}),f.updateUserStats()}function m(a){function b(a){a.settings.threadOwner!==r.currentUser.id?a.threadOwned=!1:a.threadOwned=!0}function c(a){if(a.secureEmail===!0)a.activeParticipants=a.activeParticipants,a.activeParticipantsNum=a.activeParticipants.length+1;else{a.activeParticipants=[];for(var b=0;b<a.participants.length;b++)a.participants[b].id!==r.currentUser.id&&a.activeParticipants.push(a.participants[b]);a.activeParticipantsNum=a.participants.length}}function d(a){a.secureEmail===!0||a.settings.groupChat===!0?a.profilePhotoId=a.lastMessage.from.id:a.profilePhotoId=a.activeParticipants[0].id}function e(a){function b(a,b){for(var c,d=[],e=0;e<a.length;e++)"first"===b?d.push(a[e].firstName):d.push(a[e].firstName+" "+a[e].lastName);return d.length>r.namesLength?(c=d.slice(0,r.namesLength).join(", "),c+="..."):c=d.join(", "),c}var c=null;a.secureEmail===!0?c=a.activeParticipants.length>1?b(a.activeParticipants,"first"):b(a.activeParticipants,"both"):""!==a.settings.topicName?(a.topicUsed=!0,c=a.settings.topicName):(a.topicUsed=!1,c=a.settings.groupChat===!0?b(a.activeParticipants,"first"):b(a.activeParticipants,"both")),a.activeTitle=c}for(var f=0;f<a.length;f++)r.messageListRef[a[f].threadId]=f,b(a[f]),c(a[f]),d(a[f]),e(a[f]);r.messageList=a}function n(a){var b=r.messageListRef[a.threadId];void 0!==b&&(r.currentThread===a.threadId&&(a.unreadCount=0),r.messageList[b]=a,m(r.messageList),f.updateUserStats())}function o(a){for(var b=0;b<a.length;b++)if(a[b].id===r.currentUser.id)return!0}function p(){var a=r.messageListRef[r.currentThreadData.threadId];void 0!==a&&(r.deletingThread=!0,b(function(){r.messageList.splice(a,1),k()},100),b(function(){r.deletingThread=!1},500))}function q(a){l(a),r.activateView({value:!0})}var r=this;r.messageList=[],r.messageListRef={},r.listFilter="",r.deletingThread=!1,r.currentUser=null,r.currentThread=null,r.currentThreadData=null,r.charLimit=53,r.namesLength=5,r.selectThread=q,j(),a.$on("socketEvents:sendMessage",function(a,b){o(b.messageData.participants)&&b.messagesType===r.messagesType&&n(b.threadData)}),a.$on("socketEvents:messageList",function(a,b){o(b.threadData.participants)&&b.messagesType===r.messagesType&&n(b.threadData)}),a.$on("messageView:deleteThread",p)}angular.module("app.messages").directive("messageList",a),b.$inject=["$scope","$timeout","$uibModal","config","logger","appData","sharedData","sharedServices","socket"]}(),function(){"use strict";function a(){var a={restrict:"EA",controller:b,controllerAs:"vm",bindToController:!0,scope:{messagesType:"=",activateView:"&",spaceId:"=?"},templateUrl:"app/messages/message-view.html"};return a}function b(a,b,c,d,e,f,g,h,i,j){function k(){g.getCurrentUser().then(function(a){z.currentUser=a})}function l(){g.getDataStates().then(function(a){null!==a.selectedThread&&(z.currentThread=a.selectedThread,z.currentThreadData=a.selectedThreadData,m(z.currentThread))})}function m(a){p(),z.currentThreadData.settings.groupChat===!1&&g.getUserProfile(z.currentThreadData.profilePhotoId).then(function(a){z.currentThreadData.profileData=a}),g.getMessages(a,z.messagesType).then(function(a){z.messages=a})}function n(a){var b=!1;switch(a){case"people":z.currentThreadData.settings.lockParticipants===!0?z.currentThreadData.threadOwned===!0&&(b=!0):b=!0;break;case"name":z.currentThreadData.settings.lockTopicName===!0?z.currentThreadData.threadOwned===!0&&(b=!0):b=!0;break;case"lock":z.currentThreadData.threadOwned===!0&&(b=!0)}return b}function o(a){for(var b=0;b<a.length;b++)if(a[b].id===z.currentUser.id)return!0}function p(){z.currentThreadData.notifications.on===!1?(c.cancel(),c(function(){z.showMuteNotification=!0},200),c(function(){z.showMuteNotification=!1},z.showMuteDelay)):z.showMuteNotification=!1}function q(){var b=" ",c={};z.currentThreadData.settings.groupChat===!0&&(b=" group "),c={alertType:"danger",alertTitle:"Delete"+b+"conversation",alertMessage:"<strong>Warning:</strong> Are you sure you want to delete this"+b+"conversation?",acceptButton:"Delete"},i.callAlertModal(c,function(b){a.$broadcast("messageView:deleteThread",null)})}function r(){var a=d.open({templateUrl:"app/modals/modals.html",controller:"Modal.invitePeople",controllerAs:"vm",size:"md"});a.result.then(function(a){})}function s(a){var b;b=a.id===z.currentUser.id?{alertType:"info",alertTitle:"Leave group conversation",alertMessage:"<strong>Warning:</strong> You will no longer be able to view any new messages added to the thread. You will continue to have access to the message history up to this point.",acceptButton:"Leave"}:{alertType:"info",alertTitle:"Remove people",alertMessage:'<strong>Warning:</strong> <span class="name">'+a.firstName+" "+a.lastName+'</span> will no longer be able to view any new messages added to the thread. <span class="name">'+a.firstName+" "+a.lastName+"</span> will continue to have access to the message history up to this point.",acceptButton:"Remove"},i.callAlertModal(b,function(b){for(var c=0;c<z.currentThreadData.participants.length;c++)z.currentThreadData.participants[c].id===a.id&&(z.currentThreadData.participants[c].id===z.currentUser.id&&(z.currentThreadData.isActive=!1),z.currentThreadData.participants.splice(c,1),j.emit("update:messageList",{threadData:z.currentThreadData,messagesType:z.messagesType}))})}function t(){var a=d.open({templateUrl:"app/modals/modals.html",controller:"Modal.nameGroup",controllerAs:"vm",size:"md",resolve:{topicName:function(){return z.currentThreadData.settings.topicName},lockTopicName:function(){return z.currentThreadData.settings.lockTopicName},threadOwned:function(){return z.currentThreadData.threadOwned}}});a.result.then(function(a){z.currentThreadData.settings.topicName=a.topicName,z.currentThreadData.settings.lockTopicName=a.lockTopicName,j.emit("update:messageList",{threadData:z.currentThreadData,messagesType:z.messagesType})})}function u(){j.emit("update:messageList",{threadData:z.currentThreadData,messagesType:z.messagesType})}function v(){z.infoPanelActive=!z.infoPanelActive}function w(a){"toggle"===a?z.muteOptionsActive=!z.muteOptionsActive:z.muteOptionsActive=a}function x(a){null===a?z.currentThreadData.notifications.on=!0:(z.currentThreadData.notifications.on=!1,z.muteOptionsActive=!1,null!==a.type?h.getMuteTime(a).then(function(a){z.currentThreadData.notifications.mute=a}):delete z.currentThreadData.notifications.mute),p()}function y(){var a,b,c;""!==z.message&&z.currentThreadData.isActive!==!1&&(a={author:z.currentUser,components:[{componentType:"text",componentBody:z.message}],threadId:z.currentThread,participants:z.currentThreadData.participants,sentOn:(new Date).toISOString(),newMessage:!0},b=z.currentThreadData,b.lastMessage.components.componentBody=a.components[0].componentBody,b.lastMessage.from.id=a.author.id,b.lastActivity=a.sentOn,b.unreadCount=b.unreadCount+1,c={messageData:a,messagesType:z.messagesType,threadData:b,spaceId:z.spaceId},z.message="",z.infoPanelActive=!1,j.emit("send:message",c))}var z=this;z.messages=[],z.message="",z.muteOptionsActive=!1,z.muteTimes=h.getMuteTimes(),z.showMuteNotification=!1,z.showMuteDelay=8e3,z.infoPanelActive=!1,z.currentUser=null,z.currentThread=null,z.currentThreadData=null,z.charLimit=53,z.namesLength=5,z.sendMessage=y,z.activateInfoPanel=v,z.showMuteOptions=w,z.muteConvo=x,z.accessActions=n,z.lockParticipants=u,z.deleteThread=q,z.addUsers=r,z.removeUser=s,z.nameGroup=t,k(),b.$on("appData:statesUpdate",l),b.$on("socketEvents:sendMessage",function(a,b){o(b.messageData.participants)&&b.messagesType===z.messagesType&&z.currentThread===b.messageData.threadId&&z.messages.push(b.messageData)}),b.$on("socketEvents:messageList",function(a,b){console.log(b),z.currentThread===b.threadData.threadId&&(z.currentThreadData=b.threadData)})}angular.module("app.messages").directive("messageView",a),b.$inject=["$rootScope","$scope","$timeout","$uibModal","config","logger","appData","sharedData","sharedServices","socket"]}(),function(){"use strict";angular.module("app.spaces",[])}(),function(){"use strict";function a(a){a.configureRoutes(b())}function b(){return[{url:"/spaces",config:{title:"Spaces",templateUrl:"app/spaces/spaces.html",settings:{singleView:!1,alwaysSplash:!1},loginRequired:!0}},{url:"/spaces/:id/",config:{title:"Space",templateUrl:"app/spaces/space.html",settings:{singleView:!1,alwaysSplash:!1},loginRequired:!0}}]}angular.module("app.spaces").run(a),a.$inject=["routehelper"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(){h.getCurrentUser().then(function(a){x.currentUser=a,l(),m()})}function l(){h.getUserSpaces().then(function(a){x.userSpacesData=a,x.userSort=a.sortBy,n(x.userSpacesData.spaces),i.getSortingValue(x.userSpacesData.spaces,x.userSort)})}function m(){h.getAllSpaces().then(function(a){x.allSpacesData=a,x.allSort="alphabetical",n(x.allSpacesData.spaces),i.getSortingValue(x.allSpacesData.spaces,x.allSort)})}function n(a){function b(a){var b=a.name,c=b.match(/\b(\w)/g).join("");a.initials=c}for(var c=0;c<a.length;c++)b(a[c])}function o(){for(var a=0;a<x.userSpacesData.spaces.length;a++)x.userSpacesData.spaces[a].sortOrder=a}function p(a){c.path("spaces/"+a)}function q(){var a;x.searchActive=!0,x.allSpacesData.count<x.spacesSettings.limit?d(function(){x.searchAll=x.search},x.animationDelay):x.search.length>0?(d.cancel(x.searchTimeout),x.searchTimeout=d(function(){a=x.allSpacesData.count,x.serverText=x.severTextList[0],x.serverSearch=!0,null===x.allSpacesDataSaved&&(x.allSpacesDataSaved=angular.copy(x.allSpacesData.spaces)),x.allSpacesData.spaces=[],x.serverSearchCount=null,h.searchSpaces(a,x.search,x.allSort).then(function(a){x.allSpacesData.spaces=a,n(x.allSpacesData.spaces),x.serverSearchCount=x.allSpacesData.spaces.length,x.serverSearch=!1})},1e3)):d(function(){x.serverSearchCount=x.allSpacesData.count,s()},x.animationDelay)}function r(){x.search="",x.searchAll="",x.searchActive=!1,x.serverSearchCount=null,x.allSpacesData.count>=x.spacesSettings.limit&&null!==x.allSpacesDataSaved&&d(function(){s()},x.animationDelay)}function s(){x.serverText=x.severTextList[1],x.loadingSpaces=!0,x.allSpacesData.spaces=[],d(function(){h.getSortingValue(x.allSpacesDataSaved,x.allSort),x.allSpacesData.spaces=x.allSpacesDataSaved,x.allSpacesDataSaved=null,x.loadingSpaces=!1},x.animationDelay)}function t(){x.userSorting=!0,i.getSortingValue(x.userSpacesData.spaces,x.userSort),x.userSpacesData.sortBy=x.userSort,d(function(){x.userSorting=!1},x.animationDelay)}function u(){var a=null;x.allSpacesData.count<x.spacesSettings.limit||x.searchActive?(x.allSorting=!0,i.getSortingValue(x.allSpacesData.spaces,x.allSort),d(function(){x.allSorting=!1},x.animationDelay)):(x.serverText=x.severTextList[2],x.serverSorting=!0,a=x.allSpacesData.spaces,x.allSpacesData.spaces=[],h.sortAllSpaces(a,x.allSort).then(function(a){x.allSpacesData.spaces=a,n(x.allSpacesData.spaces),d(function(){x.serverSorting=!1},x.animationDelay)}))}function v(){if(!x.loadingSpaces&&!x.searchActive&&x.allSpacesData.spaces.length<x.allSpacesData.count){var a=x.allSpacesData.spaces.length;x.allSpacesData.spaces[0];x.serverText=x.severTextList[1],x.loadingSpaces=!0,h.getNewSpaces(a,x.spacesSettings.more,2e3).then(function(a){x.allSpacesData.spaces=x.allSpacesData.spaces.concat(a),d(function(){x.loadingSpaces=!1},x.animationDelay)})}}function w(){e.open({templateUrl:"app/modals/modals.html",controller:"Modal.createSpace",controllerAs:"vm",size:"md"})}var x=this;x.currentUser=null,x.animationDelay=350,x.spacesSettings=h.getSpacesSettings(),x.severTextList=["Searching...","Loading...","Sorting..."],x.serverText=null,x.search="",x.searchAll="",x.searchActive=!1,x.searchTimeout=null,x.serverSearch=!1,x.serverSearchCount=null,x.userSpacesData=null,x.reordering=!1,x.userSort=null,x.userSorting=!1,x.userSortList=[{name:"Activity",value:"default"},{name:"Alphabetical",value:"alphabetical"},{name:"Manual",value:"custom"}],x.allSpacesData=null,x.allSpacesDataSaved=null,x.allCount=0,x.allSort=null,x.allSorting=!1,x.serverSorting=!1,x.loadingSpaces=!1,x.allSortList=[{name:"Alphabetical",value:"alphabetical"},{name:"Members: Low to High",value:"members-low"},{name:"Members: High to Low",value:"members-high"}],x.createSpaceModal=w,x.sortUserSpaces=t,x.sortAllSpaces=u,x.searching=q,x.clearSearch=r,x.selectSpace=p,x.loadMoreSpaces=v,x.sortableOptions={handle:".btn-drag","ui-floating":!0,items:"li:not(.not-sortable)",start:function(b,c){a.$broadcast("spaces:reordering",!0)},update:function(a,b){b.item.addClass("moving")},stop:function(b,c){o(),a.$broadcast("spaces:reordering",!1),d(function(){c.item.removeClass("moving")},400)}},k(),b.$on("spaces:reordering",function(a,c){x.reordering=c,b.$apply()})}angular.module("app.spaces").controller("Spaces",a),a.$inject=["$rootScope","$scope","$location","$timeout","$uibModal","config","logger","appData","sharedServices","socket"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(){l()}function l(){function a(a){var b=a.name,c=b.match(/\b(\w)/g).join("");a.initials=c}h.getSpace(q.spaceId).then(function(b){a(b),q.spaceData=b,console.log(q.spaceData),"member"===q.spaceData.userStatus&&h.getDataStates().then(function(a){a.selectedSpace!==q.spaceId&&h.setDataStates({selectedSpace:q.spaceId}),a.spaceFilter.hasOwnProperty(q.spaceId)&&(q.selectedFilter=a.spaceFilter[q.spaceId])})})}function m(a){q.selectedFilter=a,h.setDataStates({spaceFilter:q.selectedFilter})}function n(a){q.viewActive=a}function o(a){switch(a){case"decline":q.spaceData.userStatus="nonMember",h.requestSpace(q.spaceData);break;case"accept":q.spaceData.userStatus="member",h.updateUserSpaces(q.spaceData)}}function p(a){switch(a){case"request":q.spaceData.requesttojoin=!0;break;case"cancel":q.spaceData.requesttojoin=!1}console.log(q.spaceData),h.requestSpace(q.spaceData)}var q=this;q.spaceId=c.id,q.spaceData=null,q.selectedFilter="rooms",q.messagesType="space",q.selectFilter=m,q.activateView=n,q.changeInvite=o,q.requestJoin=p,k()}angular.module("app.spaces").controller("Space",a),a.$inject=["$rootScope","$scope","$routeParams","$timeout","$uibModal","config","logger","appData","sharedServices","socket"]}(),function(){"use strict";function a(a){function c(b,c,d,e){function f(){k=angular.element(j).prop("offsetWidth"),l=angular.element(j).prop("offsetHeight"),g(),e.setMeasurements(k,l)}function g(){for(var a=0,b=angular.element(j).find("> .list").children(),c=0;c<b.length;c++)angular.element(b[c]).hasClass("ui-sortable-helper")?angular.element(b[c]).attr("data-index",null):(angular.element(b[c]).attr("data-index",a),a++)}function h(){var a=e.getHeight();j.style.height=a+"px"}function i(){a(function(){f()},350)}var j=c[0],k=null,l=null,m=new MutationObserver(function(a){f()});m.observe(c[0],{childList:!0,subtree:!0}),b.$on("sharedServices:resized",i),b.$on("layout:animateUpdated",i),b.$on("gridPosition:changeHeight",h)}var d={restrict:"EA",controller:b,controllerAs:"vm",bindToController:!0,link:c,scope:{gridListing:"=",gridExtras:"="}};return d}function b(a,b){function c(b,c){m.gridData.parentWidth=b+20,0!==m.gridListing?m.gridData.parentHeight=c:(m.gridData.parentHeight=0,a.$broadcast("gridPosition:changeHeight",null)),a.$broadcast("gridPosition:update",null)}function d(a){var b=((m.gridListing+m.gridExtras)*a/m.gridData.parentWidth).toFixed(3),c=Math.ceil((m.gridListing+m.gridExtras)*a/m.gridData.parentWidth);m.gridData.rawRows=b,m.gridData.rows=c}function e(){var a=(m.gridListing+m.gridExtras)/m.gridData.rawRows,b=Math.round(a);m.gridData.cols=b}function f(a,b){var c=((Number(b)+1)*a/m.gridData.parentWidth).toFixed(1),d=Math.ceil(c)-1;m.gridData.row=d}function g(a){var b=Number(a)%m.gridData.cols;m.gridData.col=b}function h(a){var b=m.gridData.row*a;m.gridData.top=b}function i(a){var b=m.gridData.col*a;m.gridData.left=b}function j(b){var c=m.gridData.rows*b;m.gridData.parentHeight!==c&&(m.gridData.parentHeight=c),a.$broadcast("gridPosition:changeHeight",null)}function k(){return m.gridData.parentHeight}function l(a,b,c,k){var l=null;d(a),e(),f(a,c),g(c),h(b),i(a),j(b),l=m.gridData,k(l)}var m=this;m.gridData={parentWidth:null,parentHeight:null,rawRows:null,rows:null,cols:null,row:null,col:null,top:null,left:null},m.setMeasurements=c,m.getGridData=l,m.getHeight=k}angular.module("app.spaces").directive("gridPosition",a),a.$inject=["$timeout"],b.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function a(){function a(a,b,c,d){var e=b[0],f=null,g=null,h=null;a.$on("gridPosition:update",function(){f=angular.element(e).prop("offsetWidth"),g=angular.element(e).prop("offsetHeight"),h=angular.element(e).attr("data-index"),void 0!==h&&d.getGridData(f,g,h,function(a){e.style.top=a.top+"px",e.style.left=a.left+"px"})})}var b={require:"^gridPosition",restrict:"A",link:a};return b}angular.module("app.spaces").directive("gridItem",a),a.$inject=[]}(),function(){"use strict";angular.module("app.rooms",[])}(),function(){"use strict";function a(){var a={restrict:"EA",controller:b,controllerAs:"vm",bindToController:!0,scope:{spaceId:"=",spaceColor:"=",activateView:"&"},templateUrl:"app/rooms/room-list.html"};return a}function b(a,b,c,d,e,f,g,h){function i(){f.getCurrentUser().then(function(a){p.currentUser=a,j()})}function j(){f.getRoomsList(p.spaceId).then(function(a){a.length>0?(a.sort(function(a,b){return new Date(b.lastModified)-new Date(a.lastModified)}),l(a),k(a[0].roomId)):f.setDataStates({selectedThread:null,selectedThreadData:null})})}function k(a){var b=p.roomListRef[a];p.roomList[b].unreadCount=0,p.currentRoom=a,p.currentRoomData=p.roomList[p.roomListRef[a]],f.setDataStates({selectedRoom:p.currentRoom,selectedRoomData:p.currentRoomData}),f.updateUserStats()}function l(a){function b(a){a.creator.id!==p.currentUser.id?a.roomOwned=!1:a.roomOwned=!0}function c(a){for(var b=!1,c=0;c<a.lastPost.components.length;c++)"text"===a.lastPost.components[c].componentType&&(b=!0);a.previewText=b}for(var d=0;d<a.length;d++)p.roomListRef[a[d].roomId]=d,b(a[d]),c(a[d]);p.roomList=a}function m(a){var b=p.roomListRef[a.roomId];void 0!==b&&(p.currentRoom===a.roomId&&(a.unreadCount=0),p.roomList[b]=a,l(p.roomList),f.updateUserStats())}function n(a){var b=!1;if(a.isAllMembers===!0)b=!0;else for(var c=0;c<a.members.roomMembers.length;c++)a.members.roomMembers[c].id===p.currentUser.id&&(b=!0);return b}function o(a){k(a),p.activateView({value:!0})}var p=this;p.roomList=[],p.roomListRef={},p.roomFilter="",p.currentUser=null,p.currentRoom=null,p.currentRoomData=null,p.charLimit=95,p.selectRoom=o,i(),a.$on("socketEvents:createPost",function(a,b){n(b.roomData)&&b.spaceId===p.spaceId&&m(b.roomData)})}angular.module("app.spaces").directive("roomList",a),b.$inject=["$scope","$timeout","$uibModal","config","logger","appData","sharedServices","socket"]}(),function(){"use strict";function a(){var a={restrict:"EA",controller:b,controllerAs:"vm",bindToController:!0,scope:{spaceId:"=",
spaceMembers:"=",activateView:"&"},templateUrl:"app/rooms/room-view.html"};return a}function b(a,b,c,d,e,f,g,h,i){function j(){g.getCurrentUser().then(function(a){w.currentUser=a})}function k(){g.getDataStates().then(function(a){null!==a.selectedRoom&&(w.currentRoom=a.selectedRoom,w.currentRoomData=a.selectedRoomData,w.freshView=!0,l(w.currentRoom))})}function l(a){g.getPosts(w.spaceId,a).then(function(a){a.sort(function(a,b){return new Date(b.createdOn)-new Date(a.createdOn)}),m(a)})}function m(a){function c(a){a.author.id!==w.currentUser.id?a.postOwned=!1:a.postOwned=!0}function d(a){var c,d=null;a.contentOrder=[],a.content={};for(var e=0;e<a.components.length;e++)d=a.components[e].componentType,void 0===a.content[d]&&(a.content[d]=[],a.contentOrder.push(d)),"text"===d&&a.linkPreviews&&a.contentOrder.push("linkPreview"),"video"===d&&(a.components[e].videoSource=[{src:b.trustAsResourceUrl(a.components[e].componentData.filename),type:"video/mp4"}]),"location"===d&&(c="https://maps.google.com/maps?hl=en&q="+a.components[e].componentData.name+a.components[e].componentData.address+"&ie=UTF8&t=m&z=10&iwloc=B&output=embed",a.components[e].mapSource=b.trustAsResourceUrl(c)),"audio"===d&&(a.components[e].audioSource=[{src:b.trustAsResourceUrl(a.components[e].componentData.filename),type:"audio/mpeg"}]),a.content[d].push(a.components[e])}function e(a){var b,c,d=[];if(a.content.image){for(var e=0;e<a.content.image.length;e++){for(var f=0;f<a.content.image[e].componentThumbnails.length;f++)"medium"===a.content.image[e].componentThumbnails[f].size&&(b=a.content.image[e].componentThumbnails[f].url),"large"===a.content.image[e].componentThumbnails[f].size&&(c={src:a.content.image[e].componentThumbnails[f].url,w:a.content.image[e].componentThumbnails[f].width,h:a.content.image[e].componentThumbnails[f].height,msrc:b});d.push(c)}a.gallery=d}}function f(a){var b=!1;if(a.likesCount>0)for(var c=0;c<a.likes.members.length;c++)a.likes.members[c].id===w.currentUser.id&&(b=!0);a.likedByUser=b}function h(a){w.postComment[a.postId]="",a.commentsCount>0&&g.getComments(w.spaceId,w.currentRoom,a.postId).then(function(b){b.sort(function(a,b){return new Date(b.createdOn)-new Date(a.createdOn)}),w.freshView===!0&&(b.length>w.commentLimit?a.commentLimit=!0:a.commentLimit=!1),a.comments=b})}for(var i=0;i<a.length;i++)w.postsRef[a[i].postId]=i,c(a[i]),d(a[i]),e(a[i]),("timeline"!==a[i].postType||"bot"!==a[i].postType)&&(f(a[i]),h(a[i]));w.posts=a}function n(a){return a===!0?w.commentLimit:void 0}function o(a){var b=!1;if(a.isAllMembers===!0)b=!0;else for(var c=0;c<a.members.roomMembers.length;c++)a.members.roomMembers[c].id===w.currentUser.id&&(b=!0);return b}function p(a,b){var d=w.postsRef[a.postData.postId];if(void 0!==d){switch(b){case"likes":w.posts[d].likesCount=a.postData.likesCount,w.posts[d].likes.members=a.postData.likes.members,w.posts[d].lastModified=(new Date).toISOString(),w.posts[d].lastModifiedBy=a.postData.author.id;break;case"comment":w.posts[d].commentsCount=a.postData.commentsCount}c(function(){m(w.posts)},100)}}function q(b){w.gallerySlideLocation=b.location,w.galleryOptions.index=b.index,w.gallerySlides=b.gallery,w.galleryOpen=!0,a.$apply()}function r(){w.galleryOpen=!1}function s(a){var b=w.postsRef[a];w.posts[b].commentLimit=!1,w.freshView=!1}function t(a){var b={id:w.currentUser.id,firstName:w.currentUser.firstName,lastName:w.currentUser.lastName},c={postData:a,roomData:w.currentRoomData,spaceId:w.spaceId};if(c.postData.likedByUser===!1)c.postData.likes.members.unshift(b),c.postData.likesCount++,c.postData.likedByUser=!0;else{for(var d=0;d<c.postData.likes.members.length;d++)c.postData.likes.members[d].id===w.currentUser.id&&c.postData.likes.members.splice(d,1);c.postData.likesCount--,c.postData.likedByUser=!1}i.emit("post:like",c)}function u(a){var b={author:w.currentUser,components:[{componentBody:w.postComment[a.postId],componentType:"text"}],createdOn:(new Date).toISOString(),postId:a.postId,postType:"comment"},c={comment:b,postData:a,roomData:w.currentRoomData,spaceId:w.spaceId};c.postData.commentsCount=c.postData.commentsCount+1,i.emit("post:comment",c)}function v(){var a,b,c,d;d={id:w.currentUser.id,firstName:w.currentUser.firstName,lastName:w.currentUser.lastName},""!==w.post&&w.currentRoomData.isActive!==!1&&(a={postId:"pid-"+("0"+(w.posts.length+1)).slice(-2),postType:"default",createdOn:(new Date).toISOString(),lastModified:(new Date).toISOString(),lastModifiedBy:w.currentUser.id,author:d,components:[{componentType:"text",componentBody:w.post}],disabledLike:!1,disabledComment:!1,disabledOptions:!1,likesCount:0,likes:{lmodified:"",members:[]},commentsCount:0,isFollowing:!0,newPost:!0},b=w.currentRoomData,b.lastModified=a.createdOn,b.unreadCount=b.unreadCount+1,b.lastPost={author:w.currentUser,components:a.components},c={postData:a,roomData:b,spaceId:w.spaceId},w.post="",i.emit("post:create",c))}var w=this;w.posts=[],w.postsRef=[],w.post="",w.currentUser=null,w.currentRoom=null,w.currentRoomData=null,w.lazyOptions={background:!0,offset:600},w.galleryOpen=!1,w.gallerySlides=null,w.gallerySlideLocation=null,w.galleryOptions={index:0,history:!1,shareEl:!1,getThumbBoundsFn:function(a){return w.gallerySlideLocation}},w.charLimit=180,w.freshView=!0,w.postComment={},w.commentLimit=2,w.limitComments=n,w.viewComments=s,w.showGallery=q,w.closeGallery=r,w.changeLike=t,w.addPostComment=u,w.createPost=v,j(),a.$on("appData:statesUpdate",k),a.$on("socketEvents:postLikes",function(a,b){o(b.roomData)&&b.spaceId===w.spaceId&&b.roomData.roomId===w.currentRoom&&p(b,"likes")}),a.$on("socketEvents:postComment",function(a,b){o(b.roomData)&&b.spaceId===w.spaceId&&b.roomData.roomId===w.currentRoom&&p(b,"comment")}),a.$on("socketEvents:createPost",function(a,b){o(b.roomData)&&b.spaceId===w.spaceId&&b.roomData.roomId===w.currentRoom&&w.currentRoom===b.roomData.roomId&&(w.posts.push(b.postData),m(w.posts))})}angular.module("app.spaces").directive("roomView",a),b.$inject=["$scope","$sce","$timeout","$uibModal","config","logger","appData","sharedServices","socket"]}(),function(){"use strict";angular.module("app.bots",[])}(),function(){"use strict";function a(a){a.configureRoutes(b())}function b(){return[{url:"/bots",config:{title:"Bots",templateUrl:"app/bots/bots.html",settings:{singleView:!1,alwaysSplash:!1},loginRequired:!0}}]}angular.module("app.bots").run(a),a.$inject=["routehelper"]}(),function(){"use strict";function a(a,b,c){function d(){}d()}angular.module("app.bots").controller("Bots",a),a.$inject=["$timeout","config","logger"]}(),function(){"use strict";angular.module("app.external-bots",[])}(),function(){"use strict";function a(a){a.configureRoutes(b())}function b(){return[{url:"/authorize",config:{title:"external Bot Authorization",templateUrl:"app/external-bots/authorization.html",settings:{singleView:!0,alwaysSplash:!0},loginRequired:!0}},{url:"/exbots",config:{title:"External Bots",templateUrl:"app/external-bots/external-bots.html",settings:{singleView:!0,alwaysSplash:!1}}}]}angular.module("app.external-bots").run(a),a.$inject=["routehelper"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){k.getCurrentUser().then(function(a){t.currentUser=a,o()})}function o(){function a(a){k.getUserSpaces().then(function(c){function d(a,b){var c=[];k.getRoomsList(b.id).then(function(a){for(var d=0;d<a.length;d++)c.push({count:t.autoCompleteCount,spaceName:b.name,initials:b.initials,color:b.color,roomId:a[d].roomId,name:a[d].topicName,fullName:b.name+": "+a[d].topicName,type:"room"}),t.autoCompleteCount++;t.autoCompleteData=t.autoCompleteData.concat(c)})}t.spaces=c.spaces;for(var e=0;e<t.spaces.length;e++)"member"===t.spaces[e].userStatus&&(b(t.spaces[e]),a.spaces.spaceAccess===!0&&(t.autoCompleteData.push({count:t.autoCompleteCount,id:t.spaces[e].id,name:t.spaces[e].name,fullName:t.spaces[e].name,initials:t.spaces[e].initials,color:t.spaces[e].color,type:"space"}),t.autoCompleteCount++),a.spaces.roomAccess===!0&&d(e,t.spaces[e]))})}function b(a){var b=a.name,c=b.match(/\b(\w)/g).join("");a.initials=c}void 0!==t.routeParams.client_id&&k.getExternalBot(t.routeParams.client_id).then(function(b){(b.spaces.spaceAccess===!0||b.spaces.roomAccess===!0)&&(p(b),a(b)),t.externalBot=b})}function p(a){a.spaces.spaceAccess===!0&&a.spaces.roomAccess===!0?t.placeholder="Choose spaces or rooms":a.spaces.spaceAccess===!0?t.placeholder="Choose spaces":a.spaces.roomAccess===!0&&(t.placeholder="Choose rooms")}function q(a){for(var b=[],c=0;c<t.autoCompleteData.length;c++)-1!=t.autoCompleteData[c].fullName.toLowerCase().indexOf(a.toLowerCase())&&b.push(t.autoCompleteData[c]);return b}function r(){t.authorized=!0,c(function(){d.url(t.routeParams.redirect_url+"?bot_access_token="+t.routeParams.client_id)},1e3)}function s(){t.authorized=!1,d.url(t.routeParams.redirect_url)}var t=this;t.routeParams=e,t.currentUser=null,t.externalBot=null,t.lockAuthorize=!1,t.spaces=[],t.placeholder=null,t.autoCompleteCount=0,t.autoCompleteData=[],t.authorized=!1,t.tags=[],t.autoComplete=q,t.authorize=r,t.cancel=s,n(),b.$watch("vm.tags.length",function(a){a>0?t.placeholder=" ":null!==t.externalBot&&p(t.externalBot)})}angular.module("app.external-bots").controller("Authorization",a),a.$inject=["$rootScope","$scope","$timeout","$location","$routeParams","$uibModal","config","logger","layout","security","appData","sharedData","sharedServices"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){g.routeParams.bot_access_token&&(g.activeItems[g.routeParams.bot_access_token]=!0)}var g=this;g.routeParams=c,g.activeItems={"ex-01":!1,"ex-02":!1,"ex-03":!1,"ex-04":!1,"ex-05":!1},f()}angular.module("app.external-bots").controller("ExternalBots",a),a.$inject=["$timeout","$location","$routeParams","config","logger"]}(),function(){"use strict";angular.module("app.modals",[])}(),function(){"use strict";function a(a,b,c,d){function e(a){for(var c=null,d=0;d<f.length;d++)if(f[d].name===a){c=f[d];break}return b.when(c)}var f=[{name:"version",type:"app",acceptButton:"Got it!",views:[{title:"Prototype 1.2.3",name:"version",id:"m-00",template:"app/modals/templates/version.html",footer:!0}]},{name:"createSpace",type:"app",acceptButton:"Create",views:[{title:"Create a space",name:"space-new",id:"m-00",template:"app/modals/templates/space-new.html",footer:!0},{title:"Space colors",name:"space-colors",id:"m-01",template:"app/modals/templates/space-colors.html",footer:!1},{title:"Invite People to Join",name:"invite-people",id:"m-02",template:"app/modals/templates/invite-people.html",footer:!1},{title:"Who can see this space?",name:"space-visible",id:"m-03",template:"app/modals/templates/space-visible.html",footer:!1}]},{name:"createRoom",type:"app",acceptButton:"Create",views:[{title:"Create new room",name:"room-new",id:"m-00",template:"app/modals/templates/room-new.html",footer:!0},{title:"Invite people to join",name:"invite-people",id:"m-01",template:"app/modals/templates/invite-people.html",footer:!1},{title:"Who can see this room?",name:"room-visible",id:"m-02",template:"app/modals/templates/room-visible.html",footer:!1}]},{name:"accountSettings",type:"app",acceptButton:"Save",views:[{title:"Account Settings",name:"account-settings",id:"m-00",template:"app/modals/templates/account-settings.html",footer:!0},{title:"Notification sounds",name:"notification-sounds",id:"m-01",template:"app/modals/templates/notification-sounds.html",footer:!0},{title:"Blocked people",name:"block-list",id:"m-02",template:"app/modals/templates/block-list.html",footer:!1},{title:"Change password",name:"change-password",id:"m-03",template:"app/modals/templates/change-password.html",footer:!0},{title:"New direct message",name:"new-direct-message",id:"m-04",template:"app/modals/templates/new-direct-message.html",footer:!0}]},{name:"invitePeople",type:"app",acceptButton:"Save",views:[{title:"Invite people to join",name:"invite-people",id:"m-00",template:"app/modals/templates/invite-people.html",footer:!0}]},{name:"nameGroup",type:"app",acceptButton:"Save",views:[{title:"Name group",name:"name-group",id:"m-00",template:"app/modals/templates/name-group.html",footer:!0}]},{name:"adminChangeStatus",type:"admin",acceptButton:"Apply",views:[{title:"Change status",name:"change-status",id:"m-00",template:"app/admin/modals/templates/manage/change-status.html",footer:!0}]},{name:"adminUserDetails",type:"admin",acceptButton:"Done",views:[{title:"User Details",name:"user-details",id:"m-00",template:"app/admin/modals/templates/manage/user-details.html",footer:!0}]},{name:"adminUnmanagedUsers",type:"admin",acceptButton:"Manage 3",views:[{title:"Unmanaged Users",name:"unmanaged-users",id:"m-00",template:"app/admin/modals/templates/manage/unmanaged-users.html",footer:!0}]},{name:"adminManageUsers",type:"admin",acceptButton:"Confirm",views:[{title:"Manage 3 Users",name:"manage-users",id:"m-00",template:"app/admin/modals/templates/manage/manage-users.html",footer:!0}]},{name:"adminManageRoles",type:"admin",acceptButton:"Apply",views:[{title:"John's Role",name:"manage-roles",id:"m-00",template:"app/admin/modals/templates/manage/manage-roles.html",footer:!0}]},{name:"adminUserProfile",type:"admin",acceptButton:"Save",views:[{title:"John's Profile",name:"user-profile",id:"m-00",template:"app/admin/modals/templates/profile/user-profile.html",footer:!0},{title:"Space colors",name:"space-colors",id:"m-01",template:"app/modals/templates/space-colors.html",footer:!1}]},{name:"adminUserStatus",type:"admin",acceptButton:"Save",views:[{title:"John's Status",name:"user-status",id:"m-00",template:"app/admin/modals/templates/profile/user-status.html",footer:!0}]},{name:"adminUserSpaces",type:"admin",acceptButton:"Save",views:[{title:"John's Spaces",name:"user-spaces",id:"m-00",template:"app/admin/modals/templates/profile/user-spaces.html",footer:!0}]},{name:"adminUserGroups",type:"admin",acceptButton:"Assign",views:[{title:"John's Groups",name:"user-groups",id:"m-00",template:"app/admin/modals/templates/profile/user-groups.html",footer:!0}]},{name:"adminUserSessions",type:"admin",acceptButton:"Kill Session",views:[{title:"John's Sessions",name:"user-sessions",id:"m-00",template:"app/admin/modals/templates/profile/user-sessions.html",footer:!0}]},{name:"adminUserDiscovery",type:"admin",acceptButton:"Assign",views:[{title:"John's eDiscovery",name:"user-discovery",id:"m-00",template:"app/admin/modals/templates/profile/user-discovery.html",footer:!0}]},{name:"adminUserMessageTemplates",type:"admin",acceptButton:"Assign",views:[{title:"Message Templates",name:"user-message-templates",id:"m-00",template:"app/admin/modals/templates/profile/user-message-templates.html",footer:!0}]},{name:"adminGroupAddPeople",type:"admin",acceptButton:"Add",views:[{title:"Add people to group",name:"group-add-people",id:"m-00",template:"app/admin/modals/templates/groups/group-add-people.html",footer:!0}]},{name:"adminGroupAddNew",type:"admin",acceptButton:"Save",views:[{title:"Add new group",name:"group-add-new",id:"m-00",template:"app/admin/modals/templates/groups/group-add-new.html",footer:!0}]},{name:"adminGroupDelete",type:"admin",acceptButton:"Save",views:[{title:"Delete Group",name:"group-delete",id:"m-00",template:"app/admin/modals/templates/groups/group-delete.html",footer:!0}]},{name:"adminGroupEdit",type:"admin",acceptButton:"Save",views:[{title:"Edit Group",name:"group-edit",id:"m-00",template:"app/admin/modals/templates/groups/group-edit.html",footer:!0}]},{name:"adminDataImportResults",type:"admin",acceptButton:"Done",views:[{title:"Import Results",name:"data-import-results",id:"m-00",template:"app/admin/modals/templates/imports/data-import-results.html",footer:!0}]},{name:"adminDataBulkImportHistory",type:"admin",acceptButton:"Add",views:[{title:"Bulk import history",name:"data-bulk-import-history",id:"m-00",template:"app/admin/modals/templates/imports/data-bulk-import-history.html",footer:!0}]},{name:"adminDataCSVInstructions",type:"admin",acceptButton:"Done",views:[{title:"CSV instructions",name:"data-csv-instructions",id:"m-00",template:"app/admin/modals/templates/imports/data-csv-instructions.html",footer:!0}]},{name:"adminDataConfirmInvitations",type:"admin",acceptButton:"Save",views:[{title:"Confirm Invitations",name:"data-confirm-invitations",id:"m-00",template:"app/admin/modals/templates/imports/data-confirm-invitations.html",footer:!0}]},{name:"adminDataBulkInvitePeopleCSV",type:"admin",acceptButton:"Save",views:[{title:"Bulk invite people with CSV",name:"data-bulk-invite-people-csv",id:"m-00",template:"app/admin/modals/templates/imports/data-bulk-invite-people-csv.html",footer:!0}]},{name:"adminDataBulkInvitePeople",type:"admin",acceptButton:"Next",views:[{title:"Bulk invite people",name:"data-bulk-invite-people",id:"m-00",template:"app/admin/modals/templates/imports/data-bulk-invite-people.html",footer:!0}]},{name:"adminDataInvitePeople",type:"admin",acceptButton:"Invite",views:[{title:"Invite people",name:"data-invite-people",id:"m-00",template:"app/admin/modals/templates/imports/data-invite-people.html",footer:!0}]},{name:"adminRoomsSelect",type:"admin",acceptButton:"Save",views:[{title:"Select rooms",name:"rooms-select",id:"m-00",template:"app/admin/modals/templates/rooms/rooms-select.html",footer:!0}]},{name:"adminRoomsInviteEmailMobile",type:"admin",acceptButton:"Save",views:[{title:"Invite by email or mobile number",name:"rooms-invite-email-mobile",id:"m-00",template:"app/admin/modals/templates/rooms/rooms-invite-email-mobile.html",footer:!0}]},{name:"adminRoomsInviteContacts",type:"admin",acceptButton:"Invite",views:[{title:"Invite from contacts",name:"rooms-invite-contacts",id:"m-00",template:"app/admin/modals/templates/rooms/rooms-invite-contacts.html",footer:!0}]},{name:"adminRoomsManage",type:"admin",acceptButton:"Save",views:[{title:"Manage room",name:"rooms-manage",id:"m-00",template:"app/admin/modals/templates/rooms/rooms-manage.html",footer:!0}]},{name:"adminRoomsAddMember",type:"admin",acceptButton:"Save",views:[{title:"Add marketing members",name:"rooms-add-member",id:"m-00",template:"app/admin/modals/templates/rooms/rooms-add-member.html",footer:!0}]},{name:"adminRoomsSettings",type:"admin",acceptButton:"Save",views:[{title:"Room settings",name:"rooms-settings",id:"m-00",template:"app/admin/modals/templates/rooms/rooms-settings.html",footer:!0}]},{name:"adminNotificationsPreferences",type:"admin",acceptButton:"Save",views:[{title:"Notification Preferences",name:"notifications-preferences",id:"m-00",template:"app/admin/modals/templates/notifications/notifications-preferences.html",footer:!0}]}],g={getModalLayout:e};return g}angular.module("app.modals").factory("modals",a),a.$inject=["logger","$q","$rootScope","$window"]}(),function(){"use strict";function a(a,b,c,d,e){function f(a,c,d){function f(){var d,e,f,g="#"+a.currentView.id,h={windowHeight:b.innerHeight,headerHeight:c.find(".modal-header").prop("offsetHeight"),bodyHeight:c.find(g+" .template-content").prop("offsetHeight"),footerHeight:a.currentView.footer===!0?c.find(".modal-footer").prop("offsetHeight"):0};d=h.windowHeight-a.offset,0===h.bodyHeight&&(h.bodyHeight=d-(h.headerHeight+h.footerHeight)),e=h.headerHeight+h.bodyHeight+h.footerHeight,f=e>d?h.bodyHeight-(e-d):h.bodyHeight,c.find(g).css("height",f),c.find(".modal-body").css("height",f),c.perfectScrollbar("update")}a.$watch("currentView",function(){e(function(){f()},200)}),a.$on("sharedServices:resized",f)}var g={restrict:"A",link:f,scope:{currentView:"=",offset:"@"}};return g}angular.module("app.modals").directive("modalViewAnimator",a),a.$inject=["$rootScope","$window","$http","$compile","$timeout"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="version",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.version",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){a.close("accept")}function g(){a.dismiss("cancel")}var h=this;h.alertType=b,h.alertTitle=c,h.acceptButton=d,h.alertMessage=e,h.accept=f,h.cancel=g}angular.module("app.modals").controller("Modal.alerts",a),a.$inject=["$uibModalInstance","alertType","alertTitle","acceptButton","alertMessage"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(h.modalName).then(function(a){h.layoutData=a,h.currentView=h.layoutData.views[0]})}function d(a){h.previousView=h.currentView;for(var b=0;b<h.layoutData.views.length;b++)h.layoutData.views[b].name===a&&(h.currentView=h.layoutData.views[b])}function e(){h.currentView=h.previousView,h.previousView=null}function f(){a.close("accept")}function g(){a.dismiss("cancel")}var h=this;h.modalName="createSpace",h.layoutData=null,h.currentView=null,h.previousView=null,h.accept=f,h.cancel=g,h.back=e,h.changeScreen=d,c()}angular.module("app.modals").controller("Modal.createSpace",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(h.modalName).then(function(a){h.layoutData=a,h.currentView=h.layoutData.views[0]})}function d(a){h.previousView=h.currentView;for(var b=0;b<h.layoutData.views.length;b++)h.layoutData.views[b].name===a&&(h.currentView=h.layoutData.views[b])}function e(){h.currentView=h.previousView,h.previousView=null}function f(){a.close("accept")}function g(){a.dismiss("cancel")}var h=this;h.modalName="createRoom",h.layoutData=null,h.currentView=null,h.previousView=null,h.accept=f,h.cancel=g,h.back=e,h.changeScreen=d,c()}angular.module("app.modals").controller("Modal.createRoom",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(h.modalName).then(function(a){h.layoutData=a,h.currentView=h.layoutData.views[0]})}function d(a){h.previousView=h.currentView;for(var b=0;b<h.layoutData.views.length;b++)h.layoutData.views[b].name===a&&(h.currentView=h.layoutData.views[b])}function e(){h.currentView=h.previousView,h.previousView=null}function f(){a.close("accept")}function g(){a.dismiss("cancel")}var h=this;h.modalName="accountSettings",h.layoutData=null,h.currentView=null,h.previousView=null,h.accept=f,h.cancel=g,h.back=e,h.changeScreen=d,c()}angular.module("app.modals").controller("Modal.accountSettings",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="invitePeople",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.invitePeople",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){b.getModalLayout(i.modalName).then(function(a){i.layoutData=a,i.currentView=i.layoutData.views[0]})}function g(){a.close(i.modalData)}function h(){a.dismiss("cancel")}var i=this;i.modalName="nameGroup",i.layoutData=null,i.threadOwned=e,i.modalData={topicName:c,lockTopicName:d},i.accept=g,i.cancel=h,f()}angular.module("app.modals").controller("Modal.nameGroup",a),a.$inject=["$uibModalInstance","modals","topicName","lockTopicName","threadOwned"]}(),function(){"use strict";angular.module("app.admin",[])}(),function(){"use strict";function a(a){a.configureRoutes(b())}function b(){return[{url:"/admin",config:{title:"Admin",templateUrl:"app/admin/dashboard/dashboard.html",settings:{singleView:!1,alwaysSplash:!1}}},{url:"/admin/user-management",config:{title:"User Management",templateUrl:"app/admin/user-management/user-management.html",settings:{singleView:!1,alwaysSplash:!1}}}]}angular.module("app.admin").run(a),a.$inject=["routehelper"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(){}function l(a){e.open({templateUrl:"app/modals/modals.html",controller:a,controllerAs:"vm",size:"md"})}function m(a){var b={};switch(a){case"unmanage-people":b={alertType:"info",alertTitle:"Unmanage 3 People",alertMessage:"Unmanaging user will put these user back into the free kore product with all the limitations that apply. Learn more",acceptButton:"Confirm"};break;case"subscription-limit":b={alertType:"danger",alertTitle:"Subscription Limit",alertMessage:"You will exceed the 100 users subscription limit if you manage these 3 users. To continue, you must first increase your subscription limits in the billing section.",acceptButton:"Go to Billing"};break;case"group-delete":b={alertType:"info",alertTitle:"Delete Group",alertMessage:"Are you sure you want to delete the ‘All marketing’ group? Deleting a group does not delete the people in the group, however no one will be able to use @marketing to send targeted notifications in rooms.",acceptButton:"Confirm"}}i.callAlertModal(b,function(a){})}var n=this;n.openModal=l,n.openAlertModal=m,k()}angular.module("app.admin").controller("AdminDashboard",a),a.$inject=["$rootScope","$location","$scope","$timeout","$uibModal","config","logger","appData","sharedServices","socket"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){}function j(){d.open({templateUrl:"app/modals/modals.html",controller:"Modal.adminChangeStatus",controllerAs:"vm",size:"md"})}var k=this;k.openModal=j,i()}angular.module("app.admin").controller("AdminUserManagement",a),a.$inject=["$rootScope","$scope","$timeout","$uibModal","config","logger","appData","socket"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminUnmanagePeople",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminUnmanagePeople",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminChangeStatus",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminChangeStatus",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminUserDetails",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminUserDetails",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminSubscriptionLimit",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminSubscriptionLimit",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminUnmanagedUsers",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminUnmanagedUsers",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminManageUsers",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminManageUsers",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminManageRoles",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminManageRoles",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(h.modalName).then(function(a){h.layoutData=a,h.currentView=h.layoutData.views[0]})}function d(a){h.previousView=h.currentView;for(var b=0;b<h.layoutData.views.length;b++)h.layoutData.views[b].name===a&&(h.currentView=h.layoutData.views[b])}function e(){h.currentView=h.previousView,h.previousView=null}function f(){a.close("accept")}function g(){a.dismiss("cancel")}var h=this;h.modalName="adminUserProfile",h.layoutData=null,h.currentView=null,h.previousView=null,h.accept=f,h.cancel=g,h.back=e,h.changeScreen=d,c()}angular.module("app.modals").controller("Modal.adminUserProfile",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminUserStatus",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminUserStatus",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminUserSpaces",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminUserSpaces",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminUserGroups",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminUserGroups",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminUserSessions",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminUserSessions",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminUserDiscovery",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminUserDiscovery",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminUserMessageTemplates",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminUserMessageTemplates",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminGroupAddPeople",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminGroupAddPeople",a),
a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminGroupAddNew",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminGroupAddNew",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminGroupDelete",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminGroupDelete",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminGroupEdit",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminGroupEdit",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminDataImportResults",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminDataImportResults",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminDataBulkImportHistory",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminDataBulkImportHistory",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminDataCSVInstructions",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminDataCSVInstructions",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminDataConfirmInvitations",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminDataConfirmInvitations",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminDataBulkInvitePeopleCSV",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminDataBulkInvitePeopleCSV",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminDataBulkInvitePeople",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminDataBulkInvitePeople",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminDataInvitePeople",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminDataInvitePeople",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminRoomsSelect",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminRoomsSelect",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminRoomsInviteEmailMobile",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminRoomsInviteEmailMobile",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminRoomsInviteContacts",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminRoomsInviteContacts",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminRoomsManage",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminRoomsManage",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminRoomsAddMember",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminRoomsAddMember",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminRoomsSettings",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminRoomsSettings",a),a.$inject=["$uibModalInstance","modals"]}(),function(){"use strict";function a(a,b){function c(){b.getModalLayout(f.modalName).then(function(a){f.layoutData=a,f.currentView=f.layoutData.views[0]})}function d(){a.close("accept")}function e(){a.dismiss("cancel")}var f=this;f.modalName="adminNotificationsPreferences",f.layoutData=null,f.accept=d,f.cancel=e,c()}angular.module("app.modals").controller("Modal.adminNotificationsPreferences",a),a.$inject=["$uibModalInstance","modals"]}();